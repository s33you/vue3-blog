(function(s){function a(a){for(var l,e,i=a[0],c=a[1],o=a[2],r=0,u=[];r<i.length;r++)e=i[r],Object.prototype.hasOwnProperty.call(t,e)&&t[e]&&u.push(t[e][0]),t[e]=0;for(l in c)Object.prototype.hasOwnProperty.call(c,l)&&(s[l]=c[l]);d&&d(a);while(u.length)u.shift()();return p.push.apply(p,o||[]),n()}function n(){for(var s,a=0;a<p.length;a++){for(var n=p[a],l=!0,e=1;e<n.length;e++){var i=n[e];0!==t[i]&&(l=!1)}l&&(p.splice(a--,1),s=c(c.s=n[0]))}return s}var l={},e={app:0},t={app:0},p=[];function i(s){return c.p+"js/"+({}[s]||s)+"."+{"chunk-3c1a516c":"cbe88419"}[s]+".js"}function c(a){if(l[a])return l[a].exports;var n=l[a]={i:a,l:!1,exports:{}};return s[a].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(s){var a=[],n={"chunk-3c1a516c":1};e[s]?a.push(e[s]):0!==e[s]&&n[s]&&a.push(e[s]=new Promise((function(a,n){for(var l="css/"+({}[s]||s)+"."+{"chunk-3c1a516c":"5fc80ecb"}[s]+".css",t=c.p+l,p=document.getElementsByTagName("link"),i=0;i<p.length;i++){var o=p[i],r=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(r===l||r===t))return a()}var u=document.getElementsByTagName("style");for(i=0;i<u.length;i++){o=u[i],r=o.getAttribute("data-href");if(r===l||r===t)return a()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=a,d.onerror=function(a){var l=a&&a.target&&a.target.src||t,p=new Error("Loading CSS chunk "+s+" failed.\n("+l+")");p.code="CSS_CHUNK_LOAD_FAILED",p.request=l,delete e[s],d.parentNode.removeChild(d),n(p)},d.href=t;var h=document.getElementsByTagName("head")[0];h.appendChild(d)})).then((function(){e[s]=0})));var l=t[s];if(0!==l)if(l)a.push(l[2]);else{var p=new Promise((function(a,n){l=t[s]=[a,n]}));a.push(l[2]=p);var o,r=document.createElement("script");r.charset="utf-8",r.timeout=120,c.nc&&r.setAttribute("nonce",c.nc),r.src=i(s);var u=new Error;o=function(a){r.onerror=r.onload=null,clearTimeout(d);var n=t[s];if(0!==n){if(n){var l=a&&("load"===a.type?"missing":a.type),e=a&&a.target&&a.target.src;u.message="Loading chunk "+s+" failed.\n("+l+": "+e+")",u.name="ChunkLoadError",u.type=l,u.request=e,n[1](u)}t[s]=void 0}};var d=setTimeout((function(){o({type:"timeout",target:r})}),12e4);r.onerror=r.onload=o,document.head.appendChild(r)}return Promise.all(a)},c.m=s,c.c=l,c.d=function(s,a,n){c.o(s,a)||Object.defineProperty(s,a,{enumerable:!0,get:n})},c.r=function(s){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},c.t=function(s,a){if(1&a&&(s=c(s)),8&a)return s;if(4&a&&"object"===typeof s&&s&&s.__esModule)return s;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:s}),2&a&&"string"!=typeof s)for(var l in s)c.d(n,l,function(a){return s[a]}.bind(null,l));return n},c.n=function(s){var a=s&&s.__esModule?function(){return s["default"]}:function(){return s};return c.d(a,"a",a),a},c.o=function(s,a){return Object.prototype.hasOwnProperty.call(s,a)},c.p="/vue3-blog/",c.oe=function(s){throw console.error(s),s};var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=a,o=o.slice();for(var u=0;u<o.length;u++)a(o[u]);var d=r;p.push([0,"chunk-vendors"]),n()})({0:function(s,a,n){s.exports=n("cd49")},"160f":function(s,a,n){},"16df":function(s,a,n){},"1e11":function(s,a,n){"use strict";n("3733")},"1e65":function(s,a,n){"use strict";n("16df")},"22b3":function(s,a,n){},"29ed":function(s,a){s.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAM1BMVEUAAACAgAAAAADMzGaZmQD4+PiZmTNmZmbMzDN3d3eGhob//5n/+/D//8yysrLAwMD///8wQA5WAAAAAXRSTlMAQObYZgAAAAFiS0dEEJWyDSwAAAAHdElNRQfiBhoANRMBM9EaAAABO0lEQVRIx82SjW7DIAyEw5asxYbw/m8782PXJEyYSpN6jShN7sudk25bkbPoaxO577n2RWDvE46Z9kuln5nI/zBUelbRzjlvAV5yjw6A2QhIfr8E+NUEAhYT3qjUASGEIx9tOfQ2L7eEMBEB/uOBGPIxVL40SKj2GOPLF8uJcmmU0LwtKmY1iJYbUP3tUBEx/JFQnK1UEFIC7jPEWiHwt9qUPYL30M+gxb9knFwJBgl3MYoA3gREATzAIuAXAVhOsA0tAPn/OQHOfgasp4deBi4JQ4RPYuoTIF8RAsWNvFJA0kMDNicKga1KO0+AShA/U/wRKEFKaga43L8rh3XkpN8DqDuiTuAftREnAOBM1OiUBGo3VQ6QxwoWFUANfc5EjfSLM7Sie6qn5G2l9J9v3opCtN/SqvNbWjXnL+d7ShQifBYqAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE4LTA2LTI2VDAwOjUzOjE5LTA0OjAwQyKtuQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOC0wNi0yNlQwMDo1MzoxOS0wNDowMDJ/FQUAAAAASUVORK5CYII="},3682:function(s,a,n){},3733:function(s,a,n){},"44a6":function(s,a,n){"use strict";n.d(a,"d",(function(){return p})),n.d(a,"c",(function(){return i})),n.d(a,"a",(function(){return c})),n.d(a,"e",(function(){return o})),n.d(a,"b",(function(){return r}));n("4160"),n("d3b7"),n("4d63"),n("ac1f"),n("25f0"),n("5319"),n("159b"),n("ddb0");var l=n("df7c"),e=n.n(l),t=n("7a23");function p(){var s={},a=n("ad79");return a.keys().forEach((function(n){var l=e.a.basename(n).replace(".vue",""),t=a(n);s[l]=t.default})),s}function i(s,a,n,l){return Object(t["b"])((function(){var e=a[s]||n[s];return"string"===typeof e?l?l[e]:e:""}))}function c(s,a){var n=this,l=0;return function(){var e=+new Date;if(e-l>a){l=e;for(var t=arguments.length,p=new Array(t),i=0;i<t;i++)p[i]=arguments[i];s.apply(n,p)}}}function o(s,a,n){return n>a?a:n<s?s:n}function r(s,a){var n={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};for(var l in/(y+)/.test(s)&&(s=s.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+l+")").test(s)&&(s=s.replace(RegExp.$1,1==RegExp.$1.length?n[l]:("00"+n[l]).substr((""+n[l]).length)));return s}},"4d11":function(s,a,n){"use strict";n("d183")},5383:function(s,a,n){},"58d5":function(s,a,n){"use strict";n("6958")},"5caa":function(s,a,n){},"5e35":function(s,a,n){},"5e4f":function(s,a){s.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAA8FBMVEUAAACZzMytqZCZmcxmZpnM///MzP+ZzP+Zmf8AAAAzZmaZmZmZmWYMDAwpKSkiIiJmZjPn59YzMwA5OTnAwMAzM2YEBATM7P+ZZsxfX18WFhYcHBwREREICAhVVVVmZswAmcyWlpZmmZmgoKR3d3dmMwBmMzMzMzNmzMyGhoZNTU1mM5lm//9mAMwz//8AZmaAgIAzAGYAM2YAMzNmmcwzmf8AZswzM8xmzP8AZplCQkIAmf+Z//+myvD/+/AzzP+ysrIAADNmZmaZM/9mmf+ZMwDMmTPMMwCZZjP/ZgAzAACAAAAzmWYzmZkzZpn///84wENwAAAAAXRSTlMAQObYZgAAAAFiS0dET25mQUkAAAAHdElNRQfiBBMBIhJ1vRPHAAAC4klEQVRIx+2VX3fSQBDFaXYSWMxuInEWExJSKDQ0JaVW0NhW0Vpr/6jf/+M4GyAkyPH44pPe6YGH3ptfdmd3aDT+dR0YWn/qZgxMy7SaVou362L77M9s7Sd3k0qAXSvp/Oq3bNvdioO7Lf0hdvzt55btQmcjr7NH9YD2Wy82pcW2ZVDR4yp+QNB+tltGpaoJAERlGez35ZYB6FovfREgYC8MRFSVCIOV9CuorR+QAUaUwMiFnULkheh74zdafcD40BGU6EDtPegRPAqCUHPVJmC0BoB9Lx5Kegq6zMCNjgBCziWO3PHxsROKYBVoFQQkRtJDjwiRnGiho/309ifp6SkAjNKkVyX0IR4KTIjAkwPTNKcpB8nD/uBEqSyL45jpdVYJlAgRNcGbTM+mU59LLqDwh4orzmNG/64S4DBETxO8Gak949zpnxvkfxVhe3ahE7SdO4SECLwUnhsnPOu9ns1bizcXkscgWZVAa9C7VFYkWddX2dvDszxvLd5dEOISagSBl9U+rANXuXmd51fE4CyFnTV0ql3myN6nKmtZH8xpvryiQDOtE6hNqvLHcfDxMloFKKEDfaivoX6OOILd+USB6+t1oHtTJ0RwxCpFAZcC8yb5p0sdMG/qa4jc2g1YBxbNXAMWb2Rs3tT7oIhgMD0ntP8IHM+XIvt8m+fLpd6kuAn1PihNsHXLioTthX4aZUE8n89B+1lxNHYI5P9y93W8SqBIU5EFdA+Ls+SLRv0saQLw8f3D3aPNykR66hAzo5MkG419hKf7h/vHdcdtpAtNGRgw8JNG/T7AMCoI/OlpzO31TtkACR3uYjY0GvsIOsFLf5FIMeQJyp07vVkDJWhfi++tnHAEI7FDgE0fNhMj2l4M3oNRLMq5tyL0MeGVTgOodvvbcPidfiB+9MJR7Kty8kmZ6KkiuIgqR1U4cHvQNa8nk9u5F4CvknK2SlWIR1hTQpOtkB9KFEr+nZ/J/yr0E+9nabaaaJnPAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE4LTA0LTE5VDAxOjM0OjE4LTA0OjAwm26U/QAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOC0wNC0xOVQwMTozNDoxOC0wNDowMOozLEEAAAAASUVORK5CYII="},6958:function(s,a,n){},"6b8e":function(s,a,n){"use strict";n.r(a);var l=n("7a23"),e=Object(l["I"])("data-v-21590a16"),t=e((function(s,a,n,e,t,p){return Object(l["r"])(),Object(l["d"])("div",{class:"md-container",innerHTML:s.blog},null,8,["innerHTML"])})),p=Object(l["h"])({props:["blog"]});n("db80"),n("1e65");p.render=t,p.__scopeId="data-v-21590a16";a["default"]=p},"721c":function(s,a,n){"use strict";n("5caa")},7611:function(s,a,n){"use strict";n("bc48")},8488:function(s,a,n){},"85eb":function(s,a,n){},8762:function(s,a,n){},"88d2":function(s,a,n){},9967:function(s,a,n){"use strict";n("e8a9")},"99f2":function(s,a,n){"use strict";n.r(a);var l=n("7a23"),e=Object(l["I"])("data-v-542a5b78");Object(l["u"])("data-v-542a5b78");var t={class:"btn-text"},p=Object(l["f"])("button");Object(l["s"])();var i=e((function(s,a,n,e,i,c){return Object(l["r"])(),Object(l["d"])("button",{class:["btn",s.sizeClass],type:"button"},[Object(l["g"])("span",t,[Object(l["y"])(s.$slots,"default",{},(function(){return[p]}))])],2)})),c=n("44a6"),o={small:"btn-sm",large:"btn-lg"},r=Object(l["h"])({name:"w-button",props:{size:{type:String}},setup:function(s,a){var n=a.attrs,l=Object(c["c"])("size",s,n,o);return{sizeClass:l}}});n("58d5");r.render=i,r.__scopeId="data-v-542a5b78";a["default"]=r},"9d2d":function(s,a,n){"use strict";n("f289")},a584:function(s,a,n){"use strict";n.r(a);var l=n("7a23"),e=Object(l["I"])("data-v-335836c8");Object(l["u"])("data-v-335836c8");var t={class:"form-check-label"},p=Object(l["g"])("span",{class:"form-check-x"},null,-1),i=Object(l["g"])("span",{class:"form-check-sign"},null,-1),c={class:"text"},o=Object(l["f"])("Check");Object(l["s"])();var r=e((function(s,a,n,e,r,u){return Object(l["r"])(),Object(l["d"])("div",{class:["form-check",[{disabled:s.isExist(s.$attrs.disabled)}]]},[Object(l["g"])("label",t,[Object(l["g"])("input",Object(l["l"])({class:"form-check-input",type:"checkbox",checked:s.modelValue,onChange:a[1]||(a[1]=function(a){return s.$emit("update:model-value",a.target.checked)})},s.$attrs),null,16,["checked"]),p,i,Object(l["g"])("span",c,[Object(l["y"])(s.$slots,"default",{},(function(){return[o]}))])])],2)}));function u(s){return void 0!==s&&null!==s}var d=Object(l["h"])({name:"w-check",props:{modelValue:{type:Boolean,required:!0},size:{type:String}},setup:function(s,a){return{isExist:u}}});n("f40f"),n("9967");d.render=r,d.__scopeId="data-v-335836c8";a["default"]=d},aade:function(s,a,n){"use strict";n.r(a);var l=n("7a23"),e=Object(l["I"])("data-v-64204e58"),t=e((function(s,a,n,e,t,p){return Object(l["r"])(),Object(l["d"])("div",{class:"w-drag",onMousedown:a[1]||(a[1]=Object(l["H"])((function(){return s.handleMouseDownOnShape&&s.handleMouseDownOnShape.apply(s,arguments)}),["stop"]))},[(Object(l["r"])(!0),Object(l["d"])(l["a"],null,Object(l["x"])(s.pointList,(function(a,n){return Object(l["r"])(),Object(l["d"])("div",{class:"shape-point",onMousedown:Object(l["H"])((function(n){return s.handlePointMouseDown(a,n)}),["stop"]),key:n,style:s.getPointStyle(s.$props,a)},null,44,["onMousedown"])})),128)),Object(l["y"])(s.$slots,"default")],32)})),p=n("44a6");function i(s,a){var n=s.defaultStyle,l=n.width,e=n.height,t=/n/.test(a),p=/s/.test(a),i=/w/.test(a),c=/e/.test(a),o=0,r=0;2===a.length?(o=i?0:l,r=t?0:e):((t||p)&&(o=l/2,r=t?0:e),(i||c)&&(o=i?0:l,r=Math.floor(e/2)));var u={marginLeft:"-4px",marginTop:"-4px",left:"".concat(o,"px"),top:"".concat(r,"px"),cursor:"".concat(a,"-resize")};return u}function c(s,a){var n=this;a.stopPropagation(),a.preventDefault();var l=a.clientX,e=a.clientY,t=this.defaultStyle,i=t["height"],c=t["width"],o=t["top"],r=t["left"],u=this.container,d=this.minBox,h=function(a){a.stopPropagation(),a.preventDefault();/nw|ne|sw|se/.test(s);var n=a.clientX,h=a.clientY,m=h-e,j=n-l,g=/n/.test(s),A=/s/.test(s),b=/w/.test(s),f=/e/.test(s);u&&((o<0||o+t.height>u.height)&&(o=o<0?0:u.height-t.height),(r<0||r+t.width>u.width)&&(r=r<0?0:u.width-t.width));var v=+i+(g?-m:A?m:0),O=+c+(b?-j:f?j:0);t["height"]=Object(p["e"])(d.height,u.height-4,v),t["width"]=Object(p["e"])(d.width,u.width-4,O),t["left"]=Object(p["e"])(0,u.width-t["width"]+2,r+(b?j:0)),t["top"]=Object(p["e"])(0,u.height-t["height"]-2,o+(g?m:0))},m=function s(){n.$emit("resize"),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",s)};document.addEventListener("mousemove",h),document.addEventListener("mouseup",m)}var o=["ne","se","sw","nw"],r=Object(l["h"])({name:"w-drag",props:{defaultStyle:{type:Object,required:!0},minBox:{type:Object}},inject:["container"],setup:function(){return{getPointStyle:i,pointList:o,handlePointMouseDown:c}},mounted:function(){}});n("4d11");r.render=t,r.__scopeId="data-v-64204e58";a["default"]=r},ad79:function(s,a,n){var l={"./w-button.vue":"99f2","./w-card.vue":"c34d","./w-checkbox.vue":"a584","./w-dialog.vue":"d56e","./w-drag.vue":"aade","./w-icon.vue":"d1ae","./w-md.vue":"6b8e"};function e(s){var a=t(s);return n(a)}function t(s){if(!n.o(l,s)){var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}return l[s]}e.keys=function(){return Object.keys(l)},e.resolve=t,s.exports=e,e.id="ad79"},b8c6:function(s,a,n){"use strict";n("5383")},b946:function(s,a,n){"use strict";n("88d2")},bc48:function(s,a,n){},bf18:function(s,a,n){"use strict";n("22b3")},c34d:function(s,a,n){"use strict";n.r(a);var l=n("7a23"),e=Object(l["I"])("data-v-29e4b298");Object(l["u"])("data-v-29e4b298");var t={class:"card-header "},p={id:"title"},i={class:"card-body"};Object(l["s"])();var c=e((function(s,a,n,e,c,o){return Object(l["r"])(),Object(l["d"])("div",{class:["card ",s.color]},[Object(l["g"])("div",t,[Object(l["g"])("span",p,Object(l["C"])(s.title),1)]),Object(l["g"])("div",i,[Object(l["y"])(s.$slots,"default")])],2)})),o=n("44a6"),r={green:"card-secondary",bule:"card-tertiary"},u=Object(l["h"])({name:"w-card",props:{title:{type:String,default:"title"},color:{type:String}},setup:function(s,a){var n=a.attrs,l=Object(o["c"])("color",s,n,r),e=Object(o["c"])("title",s,n);return{title:e,color:l}}});n("b8c6"),n("e1c2");u.render=c,u.__scopeId="data-v-29e4b298";a["default"]=u},cb86:function(s){s.exports=JSON.parse('[{"title":"React","date":"2021/5/29","content":"<h2 style=\'text-align:center\'>React</h2>\\n<span style=\'text-align:center;color:grey;\'>日期：</span><span style=\'text-align:center;color:grey;\'>2021/5/29</span>\\t\\n<span style=\'text-align:center;color:grey;\'>作者：</span><span style=\'text-align:center;color:grey;\'>timebean</span>\\n<h2>进阶知识</h2>\\n<h3>Context</h3>\\n<p>类似于vue provider/inject 的机制</p>\\n<p>当父组件的一个属性需要层层传递到很深的层级时，使用</p>\\n<pre class=\\"hljs\\"><code><span class=\\"name\\"> lang:javascript</span><ol><li><span class=\\"line-num\\" data-line=\\"1\\"></span><span class=\\"hljs-comment\\">// Context 可以让我们无须明确地传遍每一个组件，就能将值深入传递进组件树。</span></li><li><span class=\\"line-num\\" data-line=\\"2\\"></span><span class=\\"hljs-comment\\">// 为当前的 theme 创建一个 context（“light”为默认值）。</span></li><li><span class=\\"line-num\\" data-line=\\"3\\"></span><span class=\\"hljs-keyword\\">const</span> ThemeContext = React.createContext(<span class=\\"hljs-string\\">&#x27;light&#x27;</span>);</li><li><span class=\\"line-num\\" data-line=\\"4\\"></span><span class=\\"hljs-class\\"><span class=\\"hljs-keyword\\">class</span> <span class=\\"hljs-title\\">App</span> <span class=\\"hljs-keyword\\">extends</span> <span class=\\"hljs-title\\">React</span>.<span class=\\"hljs-title\\">Component</span> </span>{</li><li><span class=\\"line-num\\" data-line=\\"5\\"></span>  <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">render</span>(<span class=\\"hljs-params\\"></span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"6\\"></span>    <span class=\\"hljs-comment\\">// 使用一个 Provider 来将当前的 theme 传递给以下的组件树。</span></li><li><span class=\\"line-num\\" data-line=\\"7\\"></span>    <span class=\\"hljs-comment\\">// 无论多深，任何组件都能读取这个值。</span></li><li><span class=\\"line-num\\" data-line=\\"8\\"></span>    <span class=\\"hljs-comment\\">// 在这个例子中，我们将 “dark” 作为当前的值传递下去。</span></li><li><span class=\\"line-num\\" data-line=\\"9\\"></span>    <span class=\\"hljs-keyword\\">return</span> (</li><li><span class=\\"line-num\\" data-line=\\"10\\"></span>      <span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">ThemeContext.Provider</span> <span class=\\"hljs-attr\\">value</span>=<span class=\\"hljs-string\\">&quot;dark&quot;</span>&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"11\\"></span>        <span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">Toolbar</span> /&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"12\\"></span>      <span class=\\"hljs-tag\\">&lt;/<span class=\\"hljs-name\\">ThemeContext.Provider</span>&gt;</span></span></li><li><span class=\\"line-num\\" data-line=\\"13\\"></span>    );</li><li><span class=\\"line-num\\" data-line=\\"14\\"></span>  }</li><li><span class=\\"line-num\\" data-line=\\"15\\"></span>}</li><li><span class=\\"line-num\\" data-line=\\"16\\"></span></li><li><span class=\\"line-num\\" data-line=\\"17\\"></span><span class=\\"hljs-function\\"><span class=\\"hljs-keyword\\">function</span> <span class=\\"hljs-title\\">Toolbar</span>(<span class=\\"hljs-params\\"></span>) </span>{</li><li><span class=\\"line-num\\" data-line=\\"18\\"></span>  <span class=\\"hljs-keyword\\">return</span> (</li><li><span class=\\"line-num\\" data-line=\\"19\\"></span>    <span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">div</span>&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"20\\"></span>      <span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">ThemedButton</span> /&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"21\\"></span>    <span class=\\"hljs-tag\\">&lt;/<span class=\\"hljs-name\\">div</span>&gt;</span></span></li><li><span class=\\"line-num\\" data-line=\\"22\\"></span>  );</li><li><span class=\\"line-num\\" data-line=\\"23\\"></span>}</li><li><span class=\\"line-num\\" data-line=\\"24\\"></span></li><li><span class=\\"line-num\\" data-line=\\"25\\"></span><span class=\\"hljs-class\\"><span class=\\"hljs-keyword\\">class</span> <span class=\\"hljs-title\\">ThemedButton</span> <span class=\\"hljs-keyword\\">extends</span> <span class=\\"hljs-title\\">React</span>.<span class=\\"hljs-title\\">Component</span> </span>{</li><li><span class=\\"line-num\\" data-line=\\"26\\"></span>  <span class=\\"hljs-comment\\">// 指定 contextType 读取当前的 theme context。</span></li><li><span class=\\"line-num\\" data-line=\\"27\\"></span>  <span class=\\"hljs-comment\\">// React 会往上找到最近的 theme Provider，然后使用它的值。</span></li><li><span class=\\"line-num\\" data-line=\\"28\\"></span>  <span class=\\"hljs-comment\\">// 在这个例子中，当前的 theme 值为 “dark”。</span></li><li><span class=\\"line-num\\" data-line=\\"29\\"></span>  </li><li><span class=\\"line-num\\" data-line=\\"30\\"></span>  <span class=\\"hljs-comment\\">//相当于inject 消费父级组件传递的context</span></li><li><span class=\\"line-num\\" data-line=\\"31\\"></span>  <span class=\\"hljs-keyword\\">static</span> contextType = ThemeContext;</li><li><span class=\\"line-num\\" data-line=\\"32\\"></span>  <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">render</span>(<span class=\\"hljs-params\\"></span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"33\\"></span>    <span class=\\"hljs-keyword\\">return</span> <span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">Button</span> <span class=\\"hljs-attr\\">theme</span>=<span class=\\"hljs-string\\">{this.context}</span> /&gt;</span></span>;</li><li><span class=\\"line-num\\" data-line=\\"34\\"></span>    <span class=\\"hljs-comment\\">//自动解包，相当于获取context.value </span></li><li><span class=\\"line-num\\" data-line=\\"35\\"></span>  }</li><li><span class=\\"line-num\\" data-line=\\"36\\"></span>}</li></ol></code></pre>\\n<p><strong>反转控制的哲学</strong></p>\\n<p>有这样一个组件</p>\\n<pre class=\\"hljs\\"><code><span class=\\"name\\"> lang:javascript</span><ol><li><span class=\\"line-num\\" data-line=\\"1\\"></span>&lt;Page user={user} avatarSize={avatarSize} /&gt;</li><li><span class=\\"line-num\\" data-line=\\"2\\"></span><span class=\\"hljs-comment\\">// ... 渲染出 ...</span></li><li><span class=\\"line-num\\" data-line=\\"3\\"></span><span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">PageLayout</span> <span class=\\"hljs-attr\\">user</span>=<span class=\\"hljs-string\\">{user}</span> <span class=\\"hljs-attr\\">avatarSize</span>=<span class=\\"hljs-string\\">{avatarSize}</span> /&gt;</span></span></li><li><span class=\\"line-num\\" data-line=\\"4\\"></span><span class=\\"hljs-comment\\">// ... 渲染出 ...</span></li><li><span class=\\"line-num\\" data-line=\\"5\\"></span><span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">NavigationBar</span> <span class=\\"hljs-attr\\">user</span>=<span class=\\"hljs-string\\">{user}</span> <span class=\\"hljs-attr\\">avatarSize</span>=<span class=\\"hljs-string\\">{avatarSize}</span> /&gt;</span></span></li><li><span class=\\"line-num\\" data-line=\\"6\\"></span><span class=\\"hljs-comment\\">// ... 渲染出 ...</span></li><li><span class=\\"line-num\\" data-line=\\"7\\"></span><span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">Link</span> <span class=\\"hljs-attr\\">href</span>=<span class=\\"hljs-string\\">{user.permalink}</span>&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"8\\"></span>  <span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">Avatar</span> <span class=\\"hljs-attr\\">user</span>=<span class=\\"hljs-string\\">{user}</span> <span class=\\"hljs-attr\\">size</span>=<span class=\\"hljs-string\\">{avatarSize}</span> /&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"9\\"></span><span class=\\"hljs-tag\\">&lt;/<span class=\\"hljs-name\\">Link</span>&gt;</span></span></li><li><span class=\\"line-num\\" data-line=\\"10\\"></span></li></ol></code></pre>\\n<p>可以看到，真正消费user 和 avatarSize 属性的组件只有<Link>组件，但它却位于很深的层级.  Context的应用场景更适合于这一层一层的组件依赖于同一个属性，显然这里不太适合.<br>\\n但这种组织方式无疑是糟糕的，一旦Link组件需要一些新的属性，每一层级都要为其传递这一新属性，非常难受</p>\\n<p>于是我们使用一种反转控制的设计理念，将Link组件本身传递下去，供需要使用它的组件去消费它。</p>\\n<pre class=\\"hljs\\"><code><span class=\\"name\\"> lang:javascript</span><ol><li><span class=\\"line-num\\" data-line=\\"1\\"></span><span class=\\"hljs-function\\"><span class=\\"hljs-keyword\\">function</span> <span class=\\"hljs-title\\">Page</span>(<span class=\\"hljs-params\\">props</span>) </span>{</li><li><span class=\\"line-num\\" data-line=\\"2\\"></span>  <span class=\\"hljs-keyword\\">const</span> user = props.user;</li><li><span class=\\"line-num\\" data-line=\\"3\\"></span>  <span class=\\"hljs-keyword\\">const</span> userLink = (</li><li><span class=\\"line-num\\" data-line=\\"4\\"></span>    <span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">Link</span> <span class=\\"hljs-attr\\">href</span>=<span class=\\"hljs-string\\">{user.permalink}</span>&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"5\\"></span>      <span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">Avatar</span> <span class=\\"hljs-attr\\">user</span>=<span class=\\"hljs-string\\">{user}</span> <span class=\\"hljs-attr\\">size</span>=<span class=\\"hljs-string\\">{props.avatarSize}</span> /&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"6\\"></span>    <span class=\\"hljs-tag\\">&lt;/<span class=\\"hljs-name\\">Link</span>&gt;</span></span></li><li><span class=\\"line-num\\" data-line=\\"7\\"></span>  );</li><li><span class=\\"line-num\\" data-line=\\"8\\"></span>  <span class=\\"hljs-keyword\\">return</span> <span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">PageLayout</span> <span class=\\"hljs-attr\\">userLink</span>=<span class=\\"hljs-string\\">{userLink}</span> /&gt;</span></span>;</li><li><span class=\\"line-num\\" data-line=\\"9\\"></span>}</li><li><span class=\\"line-num\\" data-line=\\"10\\"></span></li><li><span class=\\"line-num\\" data-line=\\"11\\"></span><span class=\\"hljs-comment\\">// 现在，我们有这样的组件：</span></li><li><span class=\\"line-num\\" data-line=\\"12\\"></span>&lt;Page user={user} avatarSize={avatarSize} /&gt;</li><li><span class=\\"line-num\\" data-line=\\"13\\"></span><span class=\\"hljs-comment\\">// ... 渲染出 ...</span></li><li><span class=\\"line-num\\" data-line=\\"14\\"></span><span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">PageLayout</span> <span class=\\"hljs-attr\\">userLink</span>=<span class=\\"hljs-string\\">{...}</span> /&gt;</span></span></li><li><span class=\\"line-num\\" data-line=\\"15\\"></span><span class=\\"hljs-comment\\">// ... 渲染出 ...</span></li><li><span class=\\"line-num\\" data-line=\\"16\\"></span><span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">NavigationBar</span> <span class=\\"hljs-attr\\">userLink</span>=<span class=\\"hljs-string\\">{...}</span> /&gt;</span></span></li><li><span class=\\"line-num\\" data-line=\\"17\\"></span><span class=\\"hljs-comment\\">// ... 渲染出 ...</span></li><li><span class=\\"line-num\\" data-line=\\"18\\"></span>{props.userLink}</li><li><span class=\\"line-num\\" data-line=\\"19\\"></span></li></ol></code></pre>\\n<p><strong>动态context</strong></p>\\n<p>显然Context的用处不止如此</p>\\n<pre class=\\"hljs\\"><code><span class=\\"name\\"> lang:javascript</span><ol><li><span class=\\"line-num\\" data-line=\\"1\\"></span><span class=\\"hljs-keyword\\">const</span> themes = {</li><li><span class=\\"line-num\\" data-line=\\"2\\"></span>  <span class=\\"hljs-attr\\">light</span>: {</li><li><span class=\\"line-num\\" data-line=\\"3\\"></span>    <span class=\\"hljs-attr\\">foreground</span>: <span class=\\"hljs-string\\">&#x27;#000000&#x27;</span>,</li><li><span class=\\"line-num\\" data-line=\\"4\\"></span>    <span class=\\"hljs-attr\\">background</span>: <span class=\\"hljs-string\\">&#x27;#eeeeee&#x27;</span>,</li><li><span class=\\"line-num\\" data-line=\\"5\\"></span>  },</li><li><span class=\\"line-num\\" data-line=\\"6\\"></span>  <span class=\\"hljs-attr\\">dark</span>: {</li><li><span class=\\"line-num\\" data-line=\\"7\\"></span>    <span class=\\"hljs-attr\\">foreground</span>: <span class=\\"hljs-string\\">&#x27;#ffffff&#x27;</span>,</li><li><span class=\\"line-num\\" data-line=\\"8\\"></span>    <span class=\\"hljs-attr\\">background</span>: <span class=\\"hljs-string\\">&#x27;#222222&#x27;</span>,</li><li><span class=\\"line-num\\" data-line=\\"9\\"></span>  },</li><li><span class=\\"line-num\\" data-line=\\"10\\"></span>};</li><li><span class=\\"line-num\\" data-line=\\"11\\"></span><span class=\\"hljs-keyword\\">const</span> ThemeContext = React.createContext(</li><li><span class=\\"line-num\\" data-line=\\"12\\"></span>  themes.dark <span class=\\"hljs-comment\\">// 默认值</span></li><li><span class=\\"line-num\\" data-line=\\"13\\"></span>);</li><li><span class=\\"line-num\\" data-line=\\"14\\"></span><span class=\\"hljs-comment\\">//基本属性</span></li><li><span class=\\"line-num\\" data-line=\\"15\\"></span></li><li><span class=\\"line-num\\" data-line=\\"16\\"></span><span class=\\"hljs-comment\\">//Theme Button 消费 ThemeContext</span></li><li><span class=\\"line-num\\" data-line=\\"17\\"></span><span class=\\"hljs-class\\"><span class=\\"hljs-keyword\\">class</span> <span class=\\"hljs-title\\">ThemedButton</span> <span class=\\"hljs-keyword\\">extends</span> <span class=\\"hljs-title\\">React</span>.<span class=\\"hljs-title\\">Component</span> </span>{</li><li><span class=\\"line-num\\" data-line=\\"18\\"></span>  <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">render</span>(<span class=\\"hljs-params\\"></span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"19\\"></span>    <span class=\\"hljs-keyword\\">let</span> props = <span class=\\"hljs-built_in\\">this</span>.props;</li><li><span class=\\"line-num\\" data-line=\\"20\\"></span>    <span class=\\"hljs-keyword\\">let</span> theme = <span class=\\"hljs-built_in\\">this</span>.context;</li><li><span class=\\"line-num\\" data-line=\\"21\\"></span>    <span class=\\"hljs-keyword\\">return</span> (</li><li><span class=\\"line-num\\" data-line=\\"22\\"></span>      <span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">button</span></li><li><span class=\\"line-num\\" data-line=\\"23\\"></span>        {<span class=\\"hljs-attr\\">...props</span>}</li><li><span class=\\"line-num\\" data-line=\\"24\\"></span>        <span class=\\"hljs-attr\\">style</span>=<span class=\\"hljs-string\\">{{backgroundColor:</span> <span class=\\"hljs-attr\\">theme.background</span>}}</li><li><span class=\\"line-num\\" data-line=\\"25\\"></span>      /&gt;</span></span></li><li><span class=\\"line-num\\" data-line=\\"26\\"></span>    );</li><li><span class=\\"line-num\\" data-line=\\"27\\"></span>  }</li><li><span class=\\"line-num\\" data-line=\\"28\\"></span>}</li><li><span class=\\"line-num\\" data-line=\\"29\\"></span>ThemedButton.contextType = ThemeContext;</li><li><span class=\\"line-num\\" data-line=\\"30\\"></span></li><li><span class=\\"line-num\\" data-line=\\"31\\"></span><span class=\\"hljs-comment\\">//写一个函数组件使ThemeButton处于更深的层级，更好的还原应用场景</span></li><li><span class=\\"line-num\\" data-line=\\"32\\"></span><span class=\\"hljs-function\\"><span class=\\"hljs-keyword\\">function</span> <span class=\\"hljs-title\\">Toolbar</span>(<span class=\\"hljs-params\\">props</span>) </span>{</li><li><span class=\\"line-num\\" data-line=\\"33\\"></span>  <span class=\\"hljs-keyword\\">return</span> (</li><li><span class=\\"line-num\\" data-line=\\"34\\"></span>    <span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">ThemedButton</span> <span class=\\"hljs-attr\\">onClick</span>=<span class=\\"hljs-string\\">{props.changeTheme}</span>&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"35\\"></span>      Change Theme</li><li><span class=\\"line-num\\" data-line=\\"36\\"></span>    <span class=\\"hljs-tag\\">&lt;/<span class=\\"hljs-name\\">ThemedButton</span>&gt;</span></span></li><li><span class=\\"line-num\\" data-line=\\"37\\"></span>  );</li><li><span class=\\"line-num\\" data-line=\\"38\\"></span>}</li><li><span class=\\"line-num\\" data-line=\\"39\\"></span></li><li><span class=\\"line-num\\" data-line=\\"40\\"></span><span class=\\"hljs-comment\\">// 通过App 组件 去控制Context 的值</span></li><li><span class=\\"line-num\\" data-line=\\"41\\"></span><span class=\\"hljs-class\\"><span class=\\"hljs-keyword\\">class</span> <span class=\\"hljs-title\\">App</span> <span class=\\"hljs-keyword\\">extends</span> <span class=\\"hljs-title\\">React</span>.<span class=\\"hljs-title\\">Component</span> </span>{</li><li><span class=\\"line-num\\" data-line=\\"42\\"></span>  <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">constructor</span>(<span class=\\"hljs-params\\">props</span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"43\\"></span>    <span class=\\"hljs-built_in\\">super</span>(props);</li><li><span class=\\"line-num\\" data-line=\\"44\\"></span>    <span class=\\"hljs-built_in\\">this</span>.state = {</li><li><span class=\\"line-num\\" data-line=\\"45\\"></span>      <span class=\\"hljs-attr\\">theme</span>: themes.light,</li><li><span class=\\"line-num\\" data-line=\\"46\\"></span>    };</li><li><span class=\\"line-num\\" data-line=\\"47\\"></span></li><li><span class=\\"line-num\\" data-line=\\"48\\"></span>    <span class=\\"hljs-built_in\\">this</span>.toggleTheme = <span class=\\"hljs-function\\">() =&gt;</span> {</li><li><span class=\\"line-num\\" data-line=\\"49\\"></span>      <span class=\\"hljs-built_in\\">this</span>.setState(<span class=\\"hljs-function\\"><span class=\\"hljs-params\\">state</span> =&gt;</span> ({</li><li><span class=\\"line-num\\" data-line=\\"50\\"></span>        <span class=\\"hljs-attr\\">theme</span>:</li><li><span class=\\"line-num\\" data-line=\\"51\\"></span>          state.theme === themes.dark</li><li><span class=\\"line-num\\" data-line=\\"52\\"></span>            ? themes.light</li><li><span class=\\"line-num\\" data-line=\\"53\\"></span>            : themes.dark,</li><li><span class=\\"line-num\\" data-line=\\"54\\"></span>      }));</li><li><span class=\\"line-num\\" data-line=\\"55\\"></span>    };</li><li><span class=\\"line-num\\" data-line=\\"56\\"></span>  }</li><li><span class=\\"line-num\\" data-line=\\"57\\"></span></li><li><span class=\\"line-num\\" data-line=\\"58\\"></span>  <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">render</span>(<span class=\\"hljs-params\\"></span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"59\\"></span>    <span class=\\"hljs-comment\\">// 在 ThemeProvider 内部的 ThemedButton 按钮组件使用 state 中的 theme 值，</span></li><li><span class=\\"line-num\\" data-line=\\"60\\"></span>    <span class=\\"hljs-comment\\">// 而外部的组件使用默认的 theme 值</span></li><li><span class=\\"line-num\\" data-line=\\"61\\"></span>    <span class=\\"hljs-keyword\\">return</span> (</li><li><span class=\\"line-num\\" data-line=\\"62\\"></span>      <span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">Page</span>&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"63\\"></span>      //让Context.Provider 的 value 与 state 关联， 从而通过state 去控制 context 的值</li><li><span class=\\"line-num\\" data-line=\\"64\\"></span>        <span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">ThemeContext.Provider</span> <span class=\\"hljs-attr\\">value</span>=<span class=\\"hljs-string\\">{this.state.theme}</span>&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"65\\"></span>        //注意这里的Context 控制函数是通过props层层传递，对，又遇到了同样的问题</li><li><span class=\\"line-num\\" data-line=\\"66\\"></span>          <span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">Toolbar</span> <span class=\\"hljs-attr\\">changeTheme</span>=<span class=\\"hljs-string\\">{this.toggleTheme}</span> /&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"67\\"></span>        <span class=\\"hljs-tag\\">&lt;/<span class=\\"hljs-name\\">ThemeContext.Provider</span>&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"68\\"></span>        <span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">Section</span>&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"69\\"></span>          <span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">ThemedButton</span> /&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"70\\"></span>        <span class=\\"hljs-tag\\">&lt;/<span class=\\"hljs-name\\">Section</span>&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"71\\"></span>      <span class=\\"hljs-tag\\">&lt;/<span class=\\"hljs-name\\">Page</span>&gt;</span></span></li><li><span class=\\"line-num\\" data-line=\\"72\\"></span>    );</li><li><span class=\\"line-num\\" data-line=\\"73\\"></span>  }</li><li><span class=\\"line-num\\" data-line=\\"74\\"></span>}</li><li><span class=\\"line-num\\" data-line=\\"75\\"></span></li><li><span class=\\"line-num\\" data-line=\\"76\\"></span>ReactDOM.render(<span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">App</span> /&gt;</span></span>, <span class=\\"hljs-built_in\\">document</span>.root);</li></ol></code></pre>\\n<p><strong>在嵌套组件中更新 Context</strong></p>\\n<p>上述例子中，控制Context 的函数时通过props传递的，React提供了一种更精确的方式来控制和消费Context</p>\\n<pre class=\\"hljs\\"><code><span class=\\"name\\"> lang:javascript</span><ol><li><span class=\\"line-num\\" data-line=\\"1\\"></span><span class=\\"hljs-keyword\\">const</span> themeContext = React.createContext({</li><li><span class=\\"line-num\\" data-line=\\"2\\"></span>  <span class=\\"hljs-attr\\">theme</span>: themes.dark,</li><li><span class=\\"line-num\\" data-line=\\"3\\"></span>  <span class=\\"hljs-attr\\">toggleTheme</span>: <span class=\\"hljs-function\\">() =&gt;</span> {},</li><li><span class=\\"line-num\\" data-line=\\"4\\"></span>});</li><li><span class=\\"line-num\\" data-line=\\"5\\"></span></li><li><span class=\\"line-num\\" data-line=\\"6\\"></span><span class=\\"hljs-function\\"><span class=\\"hljs-keyword\\">function</span> <span class=\\"hljs-title\\">ThemeTogglerButton</span>(<span class=\\"hljs-params\\"></span>) </span>{</li><li><span class=\\"line-num\\" data-line=\\"7\\"></span>  <span class=\\"hljs-comment\\">// Theme Toggler 按钮不仅仅只获取 theme 值，它也从 context 中获取到一个 toggleTheme 函数</span></li><li><span class=\\"line-num\\" data-line=\\"8\\"></span>  <span class=\\"hljs-keyword\\">return</span> (</li><li><span class=\\"line-num\\" data-line=\\"9\\"></span>    <span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">ThemeContext.Consumer</span>&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"10\\"></span>      {({theme, toggleTheme}) =&gt; (</li><li><span class=\\"line-num\\" data-line=\\"11\\"></span>        <span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">button</span>          <span class=\\"hljs-attr\\">onClick</span>=<span class=\\"hljs-string\\">{toggleTheme}</span></li><li><span class=\\"line-num\\" data-line=\\"12\\"></span>          <span class=\\"hljs-attr\\">style</span>=<span class=\\"hljs-string\\">{{backgroundColor:</span> <span class=\\"hljs-attr\\">theme.background</span>}}&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"13\\"></span></li><li><span class=\\"line-num\\" data-line=\\"14\\"></span>          Toggle Theme</li><li><span class=\\"line-num\\" data-line=\\"15\\"></span>        <span class=\\"hljs-tag\\">&lt;/<span class=\\"hljs-name\\">button</span>&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"16\\"></span>      )}</li><li><span class=\\"line-num\\" data-line=\\"17\\"></span>    <span class=\\"hljs-tag\\">&lt;/<span class=\\"hljs-name\\">ThemeContext.Consumer</span>&gt;</span></span></li><li><span class=\\"line-num\\" data-line=\\"18\\"></span>  );</li><li><span class=\\"line-num\\" data-line=\\"19\\"></span>}</li><li><span class=\\"line-num\\" data-line=\\"20\\"></span></li><li><span class=\\"line-num\\" data-line=\\"21\\"></span><span class=\\"hljs-comment\\">//这里是一个函数式组件</span></li><li><span class=\\"line-num\\" data-line=\\"22\\"></span></li><li><span class=\\"line-num\\" data-line=\\"23\\"></span></li><li><span class=\\"line-num\\" data-line=\\"24\\"></span><span class=\\"hljs-class\\"><span class=\\"hljs-keyword\\">class</span> <span class=\\"hljs-title\\">App</span> <span class=\\"hljs-keyword\\">extends</span> <span class=\\"hljs-title\\">React</span>.<span class=\\"hljs-title\\">Component</span> </span>{</li><li><span class=\\"line-num\\" data-line=\\"25\\"></span>  <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">constructor</span>(<span class=\\"hljs-params\\">props</span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"26\\"></span>    <span class=\\"hljs-built_in\\">super</span>(props);</li><li><span class=\\"line-num\\" data-line=\\"27\\"></span></li><li><span class=\\"line-num\\" data-line=\\"28\\"></span>    <span class=\\"hljs-built_in\\">this</span>.toggleTheme = <span class=\\"hljs-function\\">() =&gt;</span> {</li><li><span class=\\"line-num\\" data-line=\\"29\\"></span>      <span class=\\"hljs-built_in\\">this</span>.setState(<span class=\\"hljs-function\\"><span class=\\"hljs-params\\">state</span> =&gt;</span> ({</li><li><span class=\\"line-num\\" data-line=\\"30\\"></span>        <span class=\\"hljs-attr\\">theme</span>:</li><li><span class=\\"line-num\\" data-line=\\"31\\"></span>          state.theme === themes.dark</li><li><span class=\\"line-num\\" data-line=\\"32\\"></span>            ? themes.light</li><li><span class=\\"line-num\\" data-line=\\"33\\"></span>            : themes.dark,</li><li><span class=\\"line-num\\" data-line=\\"34\\"></span>      }));</li><li><span class=\\"line-num\\" data-line=\\"35\\"></span>    };</li><li><span class=\\"line-num\\" data-line=\\"36\\"></span></li><li><span class=\\"line-num\\" data-line=\\"37\\"></span>    <span class=\\"hljs-comment\\">// State 也包含了更新函数，因此它会被传递进 context provider。</span></li><li><span class=\\"line-num\\" data-line=\\"38\\"></span>    <span class=\\"hljs-built_in\\">this</span>.state = {</li><li><span class=\\"line-num\\" data-line=\\"39\\"></span>      <span class=\\"hljs-attr\\">theme</span>: themes.light,</li><li><span class=\\"line-num\\" data-line=\\"40\\"></span>      <span class=\\"hljs-attr\\">toggleTheme</span>: <span class=\\"hljs-built_in\\">this</span>.toggleTheme,</li><li><span class=\\"line-num\\" data-line=\\"41\\"></span>    };</li><li><span class=\\"line-num\\" data-line=\\"42\\"></span>  }</li><li><span class=\\"line-num\\" data-line=\\"43\\"></span></li><li><span class=\\"line-num\\" data-line=\\"44\\"></span>  <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">render</span>(<span class=\\"hljs-params\\"></span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"45\\"></span>    <span class=\\"hljs-comment\\">// 整个 state 都被传递进 provider</span></li><li><span class=\\"line-num\\" data-line=\\"46\\"></span>    <span class=\\"hljs-keyword\\">return</span> (</li><li><span class=\\"line-num\\" data-line=\\"47\\"></span>      <span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">ThemeContext.Provider</span> <span class=\\"hljs-attr\\">value</span>=<span class=\\"hljs-string\\">{this.state}</span>&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"48\\"></span>        <span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">Content</span> /&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"49\\"></span>      <span class=\\"hljs-tag\\">&lt;/<span class=\\"hljs-name\\">ThemeContext.Provider</span>&gt;</span></span></li><li><span class=\\"line-num\\" data-line=\\"50\\"></span>    );</li><li><span class=\\"line-num\\" data-line=\\"51\\"></span>  }</li><li><span class=\\"line-num\\" data-line=\\"52\\"></span>}</li><li><span class=\\"line-num\\" data-line=\\"53\\"></span></li><li><span class=\\"line-num\\" data-line=\\"54\\"></span><span class=\\"hljs-function\\"><span class=\\"hljs-keyword\\">function</span> <span class=\\"hljs-title\\">Content</span>(<span class=\\"hljs-params\\"></span>) </span>{</li><li><span class=\\"line-num\\" data-line=\\"55\\"></span>  <span class=\\"hljs-keyword\\">return</span> (</li><li><span class=\\"line-num\\" data-line=\\"56\\"></span>    <span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">div</span>&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"57\\"></span>      <span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">ThemeTogglerButton</span> /&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"58\\"></span>    <span class=\\"hljs-tag\\">&lt;/<span class=\\"hljs-name\\">div</span>&gt;</span></span></li><li><span class=\\"line-num\\" data-line=\\"59\\"></span>  );</li><li><span class=\\"line-num\\" data-line=\\"60\\"></span>}</li><li><span class=\\"line-num\\" data-line=\\"61\\"></span></li><li><span class=\\"line-num\\" data-line=\\"62\\"></span>ReactDOM.render(<span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">App</span> /&gt;</span></span>, <span class=\\"hljs-built_in\\">document</span>.root);</li><li><span class=\\"line-num\\" data-line=\\"63\\"></span></li></ol></code></pre>\\n<p><code>Context</code>的<code>Provider</code> 和<code>Consumer</code> 就相当于 <code>vue</code> 的 <code>provider/inject</code></p>\\n<p>并且可以通过多个Provider 和多个Consumer 实现多消费</p>\\n<h3>错误边界（Error Boundaries）</h3>\\n<p>如果一个 class 组件中定义了 <code>static getDerivedStateFromError()</code> 或 <code>componentDidCatch()  </code></p>\\n<p>这两个生命周期方法中的任意一个（或两个）时，那么它就变成一个错误边界。当抛出错误后，请使用 <code>static getDerivedStateFromError()</code> 渲染备用 UI ，使用 <code>componentDidCatch() </code>打印错误信息。</p>\\n<p><code>eg.</code></p>\\n<pre class=\\"hljs\\"><code><span class=\\"name\\"> lang:javascript</span><ol><li><span class=\\"line-num\\" data-line=\\"1\\"></span><span class=\\"hljs-class\\"><span class=\\"hljs-keyword\\">class</span> <span class=\\"hljs-title\\">ErrorBoundary</span> <span class=\\"hljs-keyword\\">extends</span> <span class=\\"hljs-title\\">React</span>.<span class=\\"hljs-title\\">Component</span> </span>{</li><li><span class=\\"line-num\\" data-line=\\"2\\"></span>  <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">constructor</span>(<span class=\\"hljs-params\\">props</span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"3\\"></span>    <span class=\\"hljs-built_in\\">super</span>(props);</li><li><span class=\\"line-num\\" data-line=\\"4\\"></span>    <span class=\\"hljs-built_in\\">this</span>.state = { <span class=\\"hljs-attr\\">hasError</span>: <span class=\\"hljs-literal\\">false</span> };</li><li><span class=\\"line-num\\" data-line=\\"5\\"></span>  }</li><li><span class=\\"line-num\\" data-line=\\"6\\"></span></li><li><span class=\\"line-num\\" data-line=\\"7\\"></span>  <span class=\\"hljs-keyword\\">static</span> <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">getDerivedStateFromError</span>(<span class=\\"hljs-params\\">error</span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"8\\"></span>    <span class=\\"hljs-comment\\">// 更新 state 使下一次渲染能够显示降级后的 UI</span></li><li><span class=\\"line-num\\" data-line=\\"9\\"></span>    <span class=\\"hljs-keyword\\">return</span> { <span class=\\"hljs-attr\\">hasError</span>: <span class=\\"hljs-literal\\">true</span> };</li><li><span class=\\"line-num\\" data-line=\\"10\\"></span>  }</li><li><span class=\\"line-num\\" data-line=\\"11\\"></span></li><li><span class=\\"line-num\\" data-line=\\"12\\"></span>  <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">componentDidCatch</span>(<span class=\\"hljs-params\\">error, errorInfo</span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"13\\"></span>    <span class=\\"hljs-comment\\">// 你同样可以将错误日志上报给服务器</span></li><li><span class=\\"line-num\\" data-line=\\"14\\"></span>    logErrorToMyService(error, errorInfo);</li><li><span class=\\"line-num\\" data-line=\\"15\\"></span>  }</li><li><span class=\\"line-num\\" data-line=\\"16\\"></span></li><li><span class=\\"line-num\\" data-line=\\"17\\"></span>  <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">render</span>(<span class=\\"hljs-params\\"></span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"18\\"></span>    <span class=\\"hljs-keyword\\">if</span> (<span class=\\"hljs-built_in\\">this</span>.state.hasError) {</li><li><span class=\\"line-num\\" data-line=\\"19\\"></span>      <span class=\\"hljs-comment\\">// 你可以自定义降级后的 UI 并渲染</span></li><li><span class=\\"line-num\\" data-line=\\"20\\"></span>      <span class=\\"hljs-keyword\\">return</span> <span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">h1</span>&gt;</span>Something went wrong.<span class=\\"hljs-tag\\">&lt;/<span class=\\"hljs-name\\">h1</span>&gt;</span></span>;</li><li><span class=\\"line-num\\" data-line=\\"21\\"></span>    }</li><li><span class=\\"line-num\\" data-line=\\"22\\"></span></li><li><span class=\\"line-num\\" data-line=\\"23\\"></span>    <span class=\\"hljs-keyword\\">return</span> <span class=\\"hljs-built_in\\">this</span>.props.children; </li><li><span class=\\"line-num\\" data-line=\\"24\\"></span>  }</li><li><span class=\\"line-num\\" data-line=\\"25\\"></span>}</li></ol></code></pre>\\n<p>错误边界是一种 React 组件，这种组件可以捕获并打印发生在其<strong>子组件树</strong>任何位置的<strong>JavaScript</strong> 错误，并且，它会渲染出<strong>备用 UI</strong>，而不是渲染那些崩溃了的子组件树。错误边界在渲染期间、生命周期方法和整个组件树的构造函数中捕获错误。</p>\\n<h3>Refs转发</h3>\\n<p>先上例子</p>\\n<pre class=\\"hljs\\"><code><span class=\\"name\\"> lang:javascript</span><ol><li><span class=\\"line-num\\" data-line=\\"1\\"></span><span class=\\"hljs-comment\\">//一个input 通过 React.forwardRef()接受从上层传入的ref 变量</span></li><li><span class=\\"line-num\\" data-line=\\"2\\"></span><span class=\\"hljs-comment\\">//并将具体的元素或者组件付给这个变量供其引用</span></li><li><span class=\\"line-num\\" data-line=\\"3\\"></span></li><li><span class=\\"line-num\\" data-line=\\"4\\"></span></li><li><span class=\\"line-num\\" data-line=\\"5\\"></span><span class=\\"hljs-keyword\\">const</span> Myinput = React.forwardRef(<span class=\\"hljs-function\\">(<span class=\\"hljs-params\\">props, ref</span>) =&gt;</span> {</li><li><span class=\\"line-num\\" data-line=\\"6\\"></span>  <span class=\\"hljs-keyword\\">return</span> (</li><li><span class=\\"line-num\\" data-line=\\"7\\"></span>    <span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">Fragment</span>&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"8\\"></span>      <span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">label</span> <span class=\\"hljs-attr\\">htmlFor</span>=<span class=\\"hljs-string\\">&quot;name&quot;</span>&gt;</span>名字:{props.name}<span class=\\"hljs-tag\\">&lt;/<span class=\\"hljs-name\\">label</span>&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"9\\"></span>      <span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">input</span> <span class=\\"hljs-attr\\">name</span>=<span class=\\"hljs-string\\">&quot;name&quot;</span> <span class=\\"hljs-attr\\">ref</span>=<span class=\\"hljs-string\\">{ref}</span> <span class=\\"hljs-attr\\">onChange</span>=<span class=\\"hljs-string\\">{props.onChange}</span> /&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"10\\"></span>      <span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">span</span>&gt;</span>{props.name}<span class=\\"hljs-tag\\">&lt;/<span class=\\"hljs-name\\">span</span>&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"11\\"></span>    <span class=\\"hljs-tag\\">&lt;/<span class=\\"hljs-name\\">Fragment</span>&gt;</span></span></li><li><span class=\\"line-num\\" data-line=\\"12\\"></span>  );</li><li><span class=\\"line-num\\" data-line=\\"13\\"></span>});</li><li><span class=\\"line-num\\" data-line=\\"14\\"></span>    </li><li><span class=\\"line-num\\" data-line=\\"15\\"></span><span class=\\"hljs-class\\"><span class=\\"hljs-keyword\\">class</span> <span class=\\"hljs-title\\">App</span> <span class=\\"hljs-keyword\\">extends</span> <span class=\\"hljs-title\\">React</span>.<span class=\\"hljs-title\\">Component</span> </span>{</li><li><span class=\\"line-num\\" data-line=\\"16\\"></span>  inputRef = React.createRef();</li><li><span class=\\"line-num\\" data-line=\\"17\\"></span>  <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">constructor</span>(<span class=\\"hljs-params\\">props</span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"18\\"></span>    <span class=\\"hljs-built_in\\">super</span>(props)</li><li><span class=\\"line-num\\" data-line=\\"19\\"></span>    <span class=\\"hljs-built_in\\">this</span>.state = {</li><li><span class=\\"line-num\\" data-line=\\"20\\"></span>      <span class=\\"hljs-attr\\">name</span>: <span class=\\"hljs-string\\">&quot;jack&quot;</span>,</li><li><span class=\\"line-num\\" data-line=\\"21\\"></span>    };</li><li><span class=\\"line-num\\" data-line=\\"22\\"></span>  }</li><li><span class=\\"line-num\\" data-line=\\"23\\"></span>  <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">toggleClick</span>(<span class=\\"hljs-params\\"></span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"24\\"></span>    <span class=\\"hljs-built_in\\">console</span>.log(<span class=\\"hljs-built_in\\">this</span>.inputRef);</li><li><span class=\\"line-num\\" data-line=\\"25\\"></span>    <span class=\\"hljs-built_in\\">this</span>.inputRef.current.focus();</li><li><span class=\\"line-num\\" data-line=\\"26\\"></span>    <span class=\\"hljs-built_in\\">console</span>.log(<span class=\\"hljs-built_in\\">this</span>.inputRef.current.value);</li><li><span class=\\"line-num\\" data-line=\\"27\\"></span>  }</li><li><span class=\\"line-num\\" data-line=\\"28\\"></span>  <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">toggleChange</span>(<span class=\\"hljs-params\\">e</span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"29\\"></span>    <span class=\\"hljs-built_in\\">this</span>.setState({</li><li><span class=\\"line-num\\" data-line=\\"30\\"></span>      <span class=\\"hljs-attr\\">name</span>: e.target.value,</li><li><span class=\\"line-num\\" data-line=\\"31\\"></span>    });</li><li><span class=\\"line-num\\" data-line=\\"32\\"></span>  }</li><li><span class=\\"line-num\\" data-line=\\"33\\"></span>  <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">render</span>(<span class=\\"hljs-params\\"></span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"34\\"></span>    <span class=\\"hljs-keyword\\">return</span> (</li><li><span class=\\"line-num\\" data-line=\\"35\\"></span>      <span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">div</span>&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"36\\"></span>        <span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">button</span> <span class=\\"hljs-attr\\">onClick</span>=<span class=\\"hljs-string\\">{()</span>=&gt;</span>this.toggleClick()}&gt;测试<span class=\\"hljs-tag\\">&lt;/<span class=\\"hljs-name\\">button</span>&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"37\\"></span>        <span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">Myinput</span></li><li><span class=\\"line-num\\" data-line=\\"38\\"></span>          <span class=\\"hljs-attr\\">name</span>=<span class=\\"hljs-string\\">{this.state.name}</span></li><li><span class=\\"line-num\\" data-line=\\"39\\"></span>          <span class=\\"hljs-attr\\">ref</span>=<span class=\\"hljs-string\\">{this.inputRef}</span></li><li><span class=\\"line-num\\" data-line=\\"40\\"></span>          <span class=\\"hljs-attr\\">onChange</span>=<span class=\\"hljs-string\\">{(e)</span>=&gt;</span>this.toggleChange(e)}</li><li><span class=\\"line-num\\" data-line=\\"41\\"></span>        /&gt;</li><li><span class=\\"line-num\\" data-line=\\"42\\"></span>      <span class=\\"hljs-tag\\">&lt;/<span class=\\"hljs-name\\">div</span>&gt;</span></span></li><li><span class=\\"line-num\\" data-line=\\"43\\"></span>    );</li><li><span class=\\"line-num\\" data-line=\\"44\\"></span>  }</li><li><span class=\\"line-num\\" data-line=\\"45\\"></span>}</li><li><span class=\\"line-num\\" data-line=\\"46\\"></span>ReactDOM.render(</li><li><span class=\\"line-num\\" data-line=\\"47\\"></span>  <span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">App</span> <span class=\\"hljs-attr\\">signedInUser</span>=<span class=\\"hljs-string\\">&quot;hello&quot;</span> <span class=\\"hljs-attr\\">theme</span>=<span class=\\"hljs-string\\">&quot;dark&quot;</span> /&gt;</span></span>,</li><li><span class=\\"line-num\\" data-line=\\"48\\"></span>  <span class=\\"hljs-built_in\\">document</span>.querySelector(<span class=\\"hljs-string\\">&quot;#timer&quot;</span>)</li><li><span class=\\"line-num\\" data-line=\\"49\\"></span>);</li></ol></code></pre>\\n<p>没什么好讲的，不能直接穿透，尽量使用React.forwardRef 去明确附加在什么元素上</p>\\n<p>通常是在高阶组件中需要注意：refs 将不会透传下去。这是因为 ref 不是 prop 属性。就像 key 一样，其被 React 进行了特殊处理。如果你对 HOC 添加 ref，该 ref 将引用最外层的容器组件，而不是被包裹的组件。</p>\\n<h3>Fragemants</h3>\\n<p>类似 template<br>\\n短语法：&lt;&gt;&lt;/&gt;<br>\\n可以带key</p>\\n<h3>高阶组件(HOC) High Order Component</h3>\\n<p>一种设计理念，具体实现来说，高阶组件是参数为组件，返回值为新组件的函数。</p>\\n<p>oldComponent -&gt; HOC -&gt; newComponent</p>\\n<blockquote>\\n<h3>注意</h3>\\n<p>我们之前建议使用 mixins 用于解决横切关注点相关的问题。但我们已经意识到 mixins 会产生更多麻烦。阅读更多 以了解我们为什么要抛弃 mixins 以及如何转换现有组件。</p>\\n</blockquote>\\n<p>也就是说HOC的解决目标在于，代码逻辑的复用。</p>\\n<p>来看一个例子，首先有这样两个组件</p>\\n<p>评论列表组件，依赖于一个数据源，当数据源发生变更，更新state</p>\\n<pre class=\\"hljs\\"><code><span class=\\"name\\"> lang:javascript</span><ol><li><span class=\\"line-num\\" data-line=\\"1\\"></span><span class=\\"hljs-class\\"><span class=\\"hljs-keyword\\">class</span> <span class=\\"hljs-title\\">CommentList</span> <span class=\\"hljs-keyword\\">extends</span> <span class=\\"hljs-title\\">React</span>.<span class=\\"hljs-title\\">Component</span> </span>{</li><li><span class=\\"line-num\\" data-line=\\"2\\"></span>  <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">constructor</span>(<span class=\\"hljs-params\\">props</span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"3\\"></span>    <span class=\\"hljs-built_in\\">super</span>(props);</li><li><span class=\\"line-num\\" data-line=\\"4\\"></span>    <span class=\\"hljs-built_in\\">this</span>.handleChange = <span class=\\"hljs-built_in\\">this</span>.handleChange.bind(<span class=\\"hljs-built_in\\">this</span>);</li><li><span class=\\"line-num\\" data-line=\\"5\\"></span>    <span class=\\"hljs-built_in\\">this</span>.state = {</li><li><span class=\\"line-num\\" data-line=\\"6\\"></span>      <span class=\\"hljs-comment\\">// 假设 &quot;DataSource&quot; 是个全局范围内的数据源变量</span></li><li><span class=\\"line-num\\" data-line=\\"7\\"></span>      <span class=\\"hljs-attr\\">comments</span>: DataSource.getComments()</li><li><span class=\\"line-num\\" data-line=\\"8\\"></span>    };</li><li><span class=\\"line-num\\" data-line=\\"9\\"></span>  }</li><li><span class=\\"line-num\\" data-line=\\"10\\"></span></li><li><span class=\\"line-num\\" data-line=\\"11\\"></span>  <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">componentDidMount</span>(<span class=\\"hljs-params\\"></span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"12\\"></span>    <span class=\\"hljs-comment\\">// 订阅更改</span></li><li><span class=\\"line-num\\" data-line=\\"13\\"></span>    DataSource.addChangeListener(<span class=\\"hljs-built_in\\">this</span>.handleChange);</li><li><span class=\\"line-num\\" data-line=\\"14\\"></span>  }</li><li><span class=\\"line-num\\" data-line=\\"15\\"></span></li><li><span class=\\"line-num\\" data-line=\\"16\\"></span>  <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">componentWillUnmount</span>(<span class=\\"hljs-params\\"></span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"17\\"></span>    <span class=\\"hljs-comment\\">// 清除订阅</span></li><li><span class=\\"line-num\\" data-line=\\"18\\"></span>    DataSource.removeChangeListener(<span class=\\"hljs-built_in\\">this</span>.handleChange);</li><li><span class=\\"line-num\\" data-line=\\"19\\"></span>  }</li><li><span class=\\"line-num\\" data-line=\\"20\\"></span></li><li><span class=\\"line-num\\" data-line=\\"21\\"></span>  <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">handleChange</span>(<span class=\\"hljs-params\\"></span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"22\\"></span>    <span class=\\"hljs-comment\\">// 当数据源更新时，更新组件状态</span></li><li><span class=\\"line-num\\" data-line=\\"23\\"></span>    <span class=\\"hljs-built_in\\">this</span>.setState({</li><li><span class=\\"line-num\\" data-line=\\"24\\"></span>      <span class=\\"hljs-attr\\">comments</span>: DataSource.getComments()</li><li><span class=\\"line-num\\" data-line=\\"25\\"></span>    });</li><li><span class=\\"line-num\\" data-line=\\"26\\"></span>  }</li><li><span class=\\"line-num\\" data-line=\\"27\\"></span></li><li><span class=\\"line-num\\" data-line=\\"28\\"></span>  <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">render</span>(<span class=\\"hljs-params\\"></span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"29\\"></span>    <span class=\\"hljs-keyword\\">return</span> (</li><li><span class=\\"line-num\\" data-line=\\"30\\"></span>      <span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">div</span>&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"31\\"></span>        {this.state.comments.map((comment) =&gt; (</li><li><span class=\\"line-num\\" data-line=\\"32\\"></span>          <span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">Comment</span> <span class=\\"hljs-attr\\">comment</span>=<span class=\\"hljs-string\\">{comment}</span> <span class=\\"hljs-attr\\">key</span>=<span class=\\"hljs-string\\">{comment.id}</span> /&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"33\\"></span>        ))}</li><li><span class=\\"line-num\\" data-line=\\"34\\"></span>      <span class=\\"hljs-tag\\">&lt;/<span class=\\"hljs-name\\">div</span>&gt;</span></span></li><li><span class=\\"line-num\\" data-line=\\"35\\"></span>    );</li><li><span class=\\"line-num\\" data-line=\\"36\\"></span>  }</li><li><span class=\\"line-num\\" data-line=\\"37\\"></span>}</li></ol></code></pre>\\n<p>博客组件，依赖于一个数据源，当博客数据源，发生变更，更新blogPost数据</p>\\n<pre class=\\"hljs\\"><code><span class=\\"name\\"> lang:javascript</span><ol><li><span class=\\"line-num\\" data-line=\\"1\\"></span><span class=\\"hljs-class\\"><span class=\\"hljs-keyword\\">class</span> <span class=\\"hljs-title\\">BlogPost</span> <span class=\\"hljs-keyword\\">extends</span> <span class=\\"hljs-title\\">React</span>.<span class=\\"hljs-title\\">Component</span> </span>{</li><li><span class=\\"line-num\\" data-line=\\"2\\"></span>  <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">constructor</span>(<span class=\\"hljs-params\\">props</span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"3\\"></span>    <span class=\\"hljs-built_in\\">super</span>(props);</li><li><span class=\\"line-num\\" data-line=\\"4\\"></span>    <span class=\\"hljs-built_in\\">this</span>.handleChange = <span class=\\"hljs-built_in\\">this</span>.handleChange.bind(<span class=\\"hljs-built_in\\">this</span>);</li><li><span class=\\"line-num\\" data-line=\\"5\\"></span>    <span class=\\"hljs-built_in\\">this</span>.state = {</li><li><span class=\\"line-num\\" data-line=\\"6\\"></span>      <span class=\\"hljs-attr\\">blogPost</span>: DataSource.getBlogPost(props.id)</li><li><span class=\\"line-num\\" data-line=\\"7\\"></span>    };</li><li><span class=\\"line-num\\" data-line=\\"8\\"></span>  }</li><li><span class=\\"line-num\\" data-line=\\"9\\"></span></li><li><span class=\\"line-num\\" data-line=\\"10\\"></span>  <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">componentDidMount</span>(<span class=\\"hljs-params\\"></span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"11\\"></span>    DataSource.addChangeListener(<span class=\\"hljs-built_in\\">this</span>.handleChange);</li><li><span class=\\"line-num\\" data-line=\\"12\\"></span>  }</li><li><span class=\\"line-num\\" data-line=\\"13\\"></span></li><li><span class=\\"line-num\\" data-line=\\"14\\"></span>  <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">componentWillUnmount</span>(<span class=\\"hljs-params\\"></span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"15\\"></span>    DataSource.removeChangeListener(<span class=\\"hljs-built_in\\">this</span>.handleChange);</li><li><span class=\\"line-num\\" data-line=\\"16\\"></span>  }</li><li><span class=\\"line-num\\" data-line=\\"17\\"></span></li><li><span class=\\"line-num\\" data-line=\\"18\\"></span>  <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">handleChange</span>(<span class=\\"hljs-params\\"></span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"19\\"></span>    <span class=\\"hljs-built_in\\">this</span>.setState({</li><li><span class=\\"line-num\\" data-line=\\"20\\"></span>      <span class=\\"hljs-attr\\">blogPost</span>: DataSource.getBlogPost(<span class=\\"hljs-built_in\\">this</span>.props.id)</li><li><span class=\\"line-num\\" data-line=\\"21\\"></span>    });</li><li><span class=\\"line-num\\" data-line=\\"22\\"></span>  }</li><li><span class=\\"line-num\\" data-line=\\"23\\"></span></li><li><span class=\\"line-num\\" data-line=\\"24\\"></span>  <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">render</span>(<span class=\\"hljs-params\\"></span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"25\\"></span>    <span class=\\"hljs-keyword\\">return</span> <span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">TextBlock</span> <span class=\\"hljs-attr\\">text</span>=<span class=\\"hljs-string\\">{this.state.blogPost}</span> /&gt;</span></span>;</li><li><span class=\\"line-num\\" data-line=\\"26\\"></span>  }</li><li><span class=\\"line-num\\" data-line=\\"27\\"></span>}</li></ol></code></pre>\\n<p>这两个组件的行为模式是如此的相近，但我们却写了这么多重复代码。</p>\\n<p>我们提取一下这两个组件的公有逻辑</p>\\n<ul>\\n<li>挂载时，向DataSource 添加一个监听器</li>\\n<li>当DataSource发生改变调用setState改变状态</li>\\n<li>在卸载时，删除侦听器</li>\\n</ul>\\n<p>对于订阅了 DataSource 的组件，比如<code>CommentList</code>和 <code>BlogPost</code>，我们可以编写一个创建组件函数。该函数将接受一个子组件作为它的其中一个参数，该子组件将订阅数据作为<code> prop</code>。让我们调用函数 <code>withSubscription</code>：</p>\\n<pre class=\\"hljs\\"><code><span class=\\"name\\"> lang:javascript</span><ol><li><span class=\\"line-num\\" data-line=\\"1\\"></span><span class=\\"hljs-keyword\\">const</span> CommentListWithSubscription = withSubscription(</li><li><span class=\\"line-num\\" data-line=\\"2\\"></span>  CommentList,</li><li><span class=\\"line-num\\" data-line=\\"3\\"></span>  <span class=\\"hljs-function\\">(<span class=\\"hljs-params\\">DataSource</span>) =&gt;</span> DataSource.getComments()</li><li><span class=\\"line-num\\" data-line=\\"4\\"></span>);</li><li><span class=\\"line-num\\" data-line=\\"5\\"></span></li><li><span class=\\"line-num\\" data-line=\\"6\\"></span><span class=\\"hljs-keyword\\">const</span> BlogPostWithSubscription = withSubscription(</li><li><span class=\\"line-num\\" data-line=\\"7\\"></span>  BlogPost,</li><li><span class=\\"line-num\\" data-line=\\"8\\"></span>  <span class=\\"hljs-function\\">(<span class=\\"hljs-params\\">DataSource, props</span>) =&gt;</span> DataSource.getBlogPost(props.id)</li><li><span class=\\"line-num\\" data-line=\\"9\\"></span>);</li></ol></code></pre>\\n<p>第一个参数是被包装组件。第二参数是一个callback函数，通过这个回调函数，我们可以结合被返回的新组件的属性，拿到我们想要的数据，接下来可以欣赏这种设计的精妙之处</p>\\n<pre class=\\"hljs\\"><code><span class=\\"name\\"> lang:javascript</span><ol><li><span class=\\"line-num\\" data-line=\\"1\\"></span><span class=\\"hljs-function\\"><span class=\\"hljs-keyword\\">function</span> <span class=\\"hljs-title\\">withSubscription</span>(<span class=\\"hljs-params\\">WrappedComponent, selectData</span>) </span>{</li><li><span class=\\"line-num\\" data-line=\\"2\\"></span>  <span class=\\"hljs-comment\\">// ...并返回另一个组件...</span></li><li><span class=\\"line-num\\" data-line=\\"3\\"></span>  <span class=\\"hljs-keyword\\">return</span> <span class=\\"hljs-class\\"><span class=\\"hljs-keyword\\">class</span> <span class=\\"hljs-keyword\\">extends</span> <span class=\\"hljs-title\\">React</span>.<span class=\\"hljs-title\\">Component</span> </span>{</li><li><span class=\\"line-num\\" data-line=\\"4\\"></span>    <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">constructor</span>(<span class=\\"hljs-params\\">props</span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"5\\"></span>      <span class=\\"hljs-built_in\\">super</span>(props);</li><li><span class=\\"line-num\\" data-line=\\"6\\"></span>      <span class=\\"hljs-built_in\\">this</span>.handleChange = <span class=\\"hljs-built_in\\">this</span>.handleChange.bind(<span class=\\"hljs-built_in\\">this</span>);</li><li><span class=\\"line-num\\" data-line=\\"7\\"></span>      <span class=\\"hljs-built_in\\">this</span>.state = {</li><li><span class=\\"line-num\\" data-line=\\"8\\"></span>      <span class=\\"hljs-comment\\">//绝佳设计，通过传递一个函数，使其能访问到新的组件的props!</span></li><li><span class=\\"line-num\\" data-line=\\"9\\"></span>        <span class=\\"hljs-attr\\">data</span>: selectData(DataSource, props)</li><li><span class=\\"line-num\\" data-line=\\"10\\"></span>      };</li><li><span class=\\"line-num\\" data-line=\\"11\\"></span>    }</li><li><span class=\\"line-num\\" data-line=\\"12\\"></span></li><li><span class=\\"line-num\\" data-line=\\"13\\"></span>    <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">componentDidMount</span>(<span class=\\"hljs-params\\"></span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"14\\"></span>      <span class=\\"hljs-comment\\">// ...负责订阅相关的操作...</span></li><li><span class=\\"line-num\\" data-line=\\"15\\"></span>      DataSource.addChangeListener(<span class=\\"hljs-built_in\\">this</span>.handleChange);</li><li><span class=\\"line-num\\" data-line=\\"16\\"></span>    }</li><li><span class=\\"line-num\\" data-line=\\"17\\"></span></li><li><span class=\\"line-num\\" data-line=\\"18\\"></span>    <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">componentWillUnmount</span>(<span class=\\"hljs-params\\"></span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"19\\"></span>      DataSource.removeChangeListener(<span class=\\"hljs-built_in\\">this</span>.handleChange);</li><li><span class=\\"line-num\\" data-line=\\"20\\"></span>    }</li><li><span class=\\"line-num\\" data-line=\\"21\\"></span></li><li><span class=\\"line-num\\" data-line=\\"22\\"></span>    <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">handleChange</span>(<span class=\\"hljs-params\\"></span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"23\\"></span>      <span class=\\"hljs-built_in\\">this</span>.setState({</li><li><span class=\\"line-num\\" data-line=\\"24\\"></span>       <span class=\\"hljs-comment\\">//绝佳设计，通过传递一个函数，使其能访问到新的组件的props!</span></li><li><span class=\\"line-num\\" data-line=\\"25\\"></span>        <span class=\\"hljs-attr\\">data</span>: selectData(DataSource, <span class=\\"hljs-built_in\\">this</span>.props)</li><li><span class=\\"line-num\\" data-line=\\"26\\"></span>      });</li><li><span class=\\"line-num\\" data-line=\\"27\\"></span>    }</li><li><span class=\\"line-num\\" data-line=\\"28\\"></span></li><li><span class=\\"line-num\\" data-line=\\"29\\"></span>    <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">render</span>(<span class=\\"hljs-params\\"></span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"30\\"></span>      <span class=\\"hljs-comment\\">// ... 并使用新数据渲染被包装的组件!</span></li><li><span class=\\"line-num\\" data-line=\\"31\\"></span>      <span class=\\"hljs-comment\\">// 请注意，我们可能还会传递其他属性</span></li><li><span class=\\"line-num\\" data-line=\\"32\\"></span>      <span class=\\"hljs-keyword\\">return</span> <span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">WrappedComponent</span> <span class=\\"hljs-attr\\">data</span>=<span class=\\"hljs-string\\">{this.state.data}</span> {<span class=\\"hljs-attr\\">...this.props</span>} /&gt;</span></span>;</li><li><span class=\\"line-num\\" data-line=\\"33\\"></span>    }</li><li><span class=\\"line-num\\" data-line=\\"34\\"></span>  };</li><li><span class=\\"line-num\\" data-line=\\"35\\"></span>}</li></ol></code></pre>\\n<h4>总结：HOC主要是用于代码逻辑复用， 在HOC中，将传入组件所需要的props,方法等组装好，供传入组件消费</h4>\\n<h4>深入，HOC的具体应用场景</h4>\\n<h5>1.组合渲染</h5>\\n<blockquote>\\n<p>属性代理实现</p>\\n</blockquote>\\n<pre class=\\"hljs\\"><code><span class=\\"name\\"> lang:javascript</span><ol><li><span class=\\"line-num\\" data-line=\\"1\\"></span><span class=\\"hljs-function\\"><span class=\\"hljs-keyword\\">function</span> <span class=\\"hljs-title\\">stylHOC</span>(<span class=\\"hljs-params\\">WrappedComponent</span>) </span>{</li><li><span class=\\"line-num\\" data-line=\\"2\\"></span>  <span class=\\"hljs-keyword\\">return</span> <span class=\\"hljs-class\\"><span class=\\"hljs-keyword\\">class</span> <span class=\\"hljs-keyword\\">extends</span> <span class=\\"hljs-title\\">Component</span> </span>{</li><li><span class=\\"line-num\\" data-line=\\"3\\"></span>    <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">render</span>(<span class=\\"hljs-params\\"></span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"4\\"></span>      <span class=\\"hljs-keyword\\">return</span> (<span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">div</span>&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"5\\"></span>        <span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">div</span> <span class=\\"hljs-attr\\">className</span>=<span class=\\"hljs-string\\">&quot;title&quot;</span>&gt;</span>{this.props.title}<span class=\\"hljs-tag\\">&lt;/<span class=\\"hljs-name\\">div</span>&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"6\\"></span>        <span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">WrappedComponent</span> {<span class=\\"hljs-attr\\">...this.props</span>} /&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"7\\"></span>      <span class=\\"hljs-tag\\">&lt;/<span class=\\"hljs-name\\">div</span>&gt;</span></span>);</li><li><span class=\\"line-num\\" data-line=\\"8\\"></span>    }</li><li><span class=\\"line-num\\" data-line=\\"9\\"></span>  }</li><li><span class=\\"line-num\\" data-line=\\"10\\"></span>}</li></ol></code></pre>\\n<blockquote>\\n<p>反向继承</p>\\n</blockquote>\\n<pre class=\\"hljs\\"><code><span class=\\"name\\"> lang:javascript</span><ol><li><span class=\\"line-num\\" data-line=\\"1\\"></span><span class=\\"hljs-function\\"><span class=\\"hljs-keyword\\">function</span> <span class=\\"hljs-title\\">stylHOC</span>(<span class=\\"hljs-params\\">WrappedComponent</span>)</span>{</li><li><span class=\\"line-num\\" data-line=\\"2\\"></span>    <span class=\\"hljs-keyword\\">return</span> <span class=\\"hljs-class\\"><span class=\\"hljs-keyword\\">class</span> <span class=\\"hljs-keyword\\">extends</span> <span class=\\"hljs-title\\">WrappedComponent</span></span>{</li><li><span class=\\"line-num\\" data-line=\\"3\\"></span>        <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">render</span>(<span class=\\"hljs-params\\"></span>)</span>{</li><li><span class=\\"line-num\\" data-line=\\"4\\"></span>            <span class=\\"hljs-keyword\\">return</span> (<span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">div</span>&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"5\\"></span>                <span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">div</span> <span class=\\"hljs-attr\\">className</span>=<span class=\\"hljs-string\\">&quot;title&quot;</span>&gt;</span>{this.props.title}<span class=\\"hljs-tag\\">&lt;/<span class=\\"hljs-name\\">div</span>&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"6\\"></span>                 {super.render()}</li><li><span class=\\"line-num\\" data-line=\\"7\\"></span>                <span class=\\"hljs-tag\\">&lt;/<span class=\\"hljs-name\\">div</span>&gt;</span></span></li><li><span class=\\"line-num\\" data-line=\\"8\\"></span>            )</li><li><span class=\\"line-num\\" data-line=\\"9\\"></span>        }</li><li><span class=\\"line-num\\" data-line=\\"10\\"></span>    }</li><li><span class=\\"line-num\\" data-line=\\"11\\"></span>}</li></ol></code></pre>\\n<h5>2.条件渲染</h5>\\n<pre class=\\"hljs\\"><code><span class=\\"name\\"> lang:javascript</span><ol><li><span class=\\"line-num\\" data-line=\\"1\\"></span><span class=\\"hljs-comment\\">//通过属性代理实现</span></li><li><span class=\\"line-num\\" data-line=\\"2\\"></span><span class=\\"hljs-function\\"><span class=\\"hljs-keyword\\">function</span> <span class=\\"hljs-title\\">visibleHOC</span>(<span class=\\"hljs-params\\">WrappedComponent</span>) </span>{</li><li><span class=\\"line-num\\" data-line=\\"3\\"></span>  <span class=\\"hljs-keyword\\">return</span> <span class=\\"hljs-class\\"><span class=\\"hljs-keyword\\">class</span> <span class=\\"hljs-keyword\\">extends</span> <span class=\\"hljs-title\\">Component</span> </span>{</li><li><span class=\\"line-num\\" data-line=\\"4\\"></span>    <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">render</span>(<span class=\\"hljs-params\\"></span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"5\\"></span>      <span class=\\"hljs-keyword\\">if</span> (<span class=\\"hljs-built_in\\">this</span>.props.visible === <span class=\\"hljs-literal\\">false</span>) <span class=\\"hljs-keyword\\">return</span> <span class=\\"hljs-literal\\">null</span>;</li><li><span class=\\"line-num\\" data-line=\\"6\\"></span>      <span class=\\"hljs-keyword\\">return</span> <span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">WrappedComponent</span> {<span class=\\"hljs-attr\\">...props</span>} /&gt;</span></span>;</li><li><span class=\\"line-num\\" data-line=\\"7\\"></span>    }</li><li><span class=\\"line-num\\" data-line=\\"8\\"></span>  }</li><li><span class=\\"line-num\\" data-line=\\"9\\"></span>}</li><li><span class=\\"line-num\\" data-line=\\"10\\"></span></li><li><span class=\\"line-num\\" data-line=\\"11\\"></span><span class=\\"hljs-comment\\">//通过反向继承实现</span></li><li><span class=\\"line-num\\" data-line=\\"12\\"></span></li><li><span class=\\"line-num\\" data-line=\\"13\\"></span><span class=\\"hljs-function\\"><span class=\\"hljs-keyword\\">function</span> <span class=\\"hljs-title\\">visibleHOC</span>(<span class=\\"hljs-params\\">WrappedComponent</span>) </span>{</li><li><span class=\\"line-num\\" data-line=\\"14\\"></span>  <span class=\\"hljs-keyword\\">return</span> <span class=\\"hljs-class\\"><span class=\\"hljs-keyword\\">class</span> <span class=\\"hljs-keyword\\">extends</span> <span class=\\"hljs-title\\">WrappedComponent</span> </span>{</li><li><span class=\\"line-num\\" data-line=\\"15\\"></span>    <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">render</span>(<span class=\\"hljs-params\\"></span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"16\\"></span>      <span class=\\"hljs-keyword\\">if</span> (<span class=\\"hljs-built_in\\">this</span>.props.visible === <span class=\\"hljs-literal\\">false</span>) {</li><li><span class=\\"line-num\\" data-line=\\"17\\"></span>        <span class=\\"hljs-keyword\\">return</span> <span class=\\"hljs-literal\\">null</span></li><li><span class=\\"line-num\\" data-line=\\"18\\"></span>      } <span class=\\"hljs-keyword\\">else</span> {</li><li><span class=\\"line-num\\" data-line=\\"19\\"></span>        <span class=\\"hljs-keyword\\">return</span> <span class=\\"hljs-built_in\\">super</span>.render()</li><li><span class=\\"line-num\\" data-line=\\"20\\"></span>      }</li><li><span class=\\"line-num\\" data-line=\\"21\\"></span>    }</li><li><span class=\\"line-num\\" data-line=\\"22\\"></span>  }</li><li><span class=\\"line-num\\" data-line=\\"23\\"></span>}</li></ol></code></pre>\\n<h5>3.对props进行加工</h5>\\n<pre class=\\"hljs\\"><code><span class=\\"name\\"> lang:javascript</span><ol><li><span class=\\"line-num\\" data-line=\\"1\\"></span><span class=\\"hljs-function\\"><span class=\\"hljs-keyword\\">function</span> <span class=\\"hljs-title\\">proxyHOC</span>(<span class=\\"hljs-params\\">WrappedComponent</span>) </span>{</li><li><span class=\\"line-num\\" data-line=\\"2\\"></span>  <span class=\\"hljs-keyword\\">return</span> <span class=\\"hljs-class\\"><span class=\\"hljs-keyword\\">class</span> <span class=\\"hljs-keyword\\">extends</span> <span class=\\"hljs-title\\">Component</span> </span>{</li><li><span class=\\"line-num\\" data-line=\\"3\\"></span>    <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">render</span>(<span class=\\"hljs-params\\"></span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"4\\"></span>      <span class=\\"hljs-keyword\\">const</span> newProps = {</li><li><span class=\\"line-num\\" data-line=\\"5\\"></span>        ...this.props,</li><li><span class=\\"line-num\\" data-line=\\"6\\"></span>        <span class=\\"hljs-attr\\">user</span>: <span class=\\"hljs-string\\">&#x27;ConardLi&#x27;</span></li><li><span class=\\"line-num\\" data-line=\\"7\\"></span>      }</li><li><span class=\\"line-num\\" data-line=\\"8\\"></span>      <span class=\\"hljs-keyword\\">return</span> <span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">WrappedComponent</span> {<span class=\\"hljs-attr\\">...newProps</span>} /&gt;</span></span>;</li><li><span class=\\"line-num\\" data-line=\\"9\\"></span>    }</li><li><span class=\\"line-num\\" data-line=\\"10\\"></span>  }</li><li><span class=\\"line-num\\" data-line=\\"11\\"></span>}</li></ol></code></pre>\\n<h5>4.获取refs</h5>\\n<pre class=\\"hljs\\"><code><span class=\\"name\\"> lang:javascript</span><ol><li><span class=\\"line-num\\" data-line=\\"1\\"></span><span class=\\"hljs-function\\"><span class=\\"hljs-keyword\\">function</span> <span class=\\"hljs-title\\">refHOC</span>(<span class=\\"hljs-params\\">WrappedComponent</span>) </span>{</li><li><span class=\\"line-num\\" data-line=\\"2\\"></span>  <span class=\\"hljs-keyword\\">return</span> <span class=\\"hljs-class\\"><span class=\\"hljs-keyword\\">class</span> <span class=\\"hljs-keyword\\">extends</span> <span class=\\"hljs-title\\">Component</span> </span>{</li><li><span class=\\"line-num\\" data-line=\\"3\\"></span>    <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">componentDidMount</span>(<span class=\\"hljs-params\\"></span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"4\\"></span>      <span class=\\"hljs-built_in\\">this</span>.wapperRef.log()</li><li><span class=\\"line-num\\" data-line=\\"5\\"></span>    }</li><li><span class=\\"line-num\\" data-line=\\"6\\"></span>    <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">render</span>(<span class=\\"hljs-params\\"></span>)</span> {</li><li><span class=\\"line-num\\" data-line=\\"7\\"></span>      <span class=\\"hljs-keyword\\">return</span> <span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">WrappedComponent</span> {<span class=\\"hljs-attr\\">...this.props</span>} <span class=\\"hljs-attr\\">ref</span>=<span class=\\"hljs-string\\">{ref</span> =&gt;</span> { this.wapperRef = ref }} /&gt;</span>;</li><li><span class=\\"line-num\\" data-line=\\"8\\"></span>    }</li><li><span class=\\"line-num\\" data-line=\\"9\\"></span>  }</li><li><span class=\\"line-num\\" data-line=\\"10\\"></span>}</li></ol></code></pre>\\n<h5>5.状态管理</h5>\\n<p>将原组件的状态提取到<code>HOC</code>中进行管理，如下面的代码，我们将<code>Input</code>的<code>value</code>提取到<code>HOC</code>中进行管理，使它变成受控组件，同时不影响它使用<code>onChange</code>方法进行一些其他操作。基于这种方式，我们可以实现一个简单的双向绑定，具体请看双向绑定。</p>\\n<pre class=\\"hljs\\"><code><span class=\\"name\\"> lang:javascript</span><ol><li><span class=\\"line-num\\" data-line=\\"1\\"></span><span class=\\"hljs-function\\"><span class=\\"hljs-keyword\\">function</span> <span class=\\"hljs-title\\">proxyHoc</span>(<span class=\\"hljs-params\\">WrappedComponent</span>)</span>{</li><li><span class=\\"line-num\\" data-line=\\"2\\"></span>    <span class=\\"hljs-keyword\\">return</span> <span class=\\"hljs-class\\"><span class=\\"hljs-keyword\\">class</span> <span class=\\"hljs-keyword\\">extends</span> <span class=\\"hljs-title\\">React</span>.<span class=\\"hljs-title\\">Component</span></span>{</li><li><span class=\\"line-num\\" data-line=\\"3\\"></span>      <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">constructor</span>(<span class=\\"hljs-params\\">props</span>)</span>{</li><li><span class=\\"line-num\\" data-line=\\"4\\"></span>        <span class=\\"hljs-built_in\\">super</span>(props)</li><li><span class=\\"line-num\\" data-line=\\"5\\"></span>        <span class=\\"hljs-built_in\\">this</span>.state = {</li><li><span class=\\"line-num\\" data-line=\\"6\\"></span>          <span class=\\"hljs-attr\\">value</span>:<span class=\\"hljs-string\\">&quot;&quot;</span></li><li><span class=\\"line-num\\" data-line=\\"7\\"></span>        }</li><li><span class=\\"line-num\\" data-line=\\"8\\"></span>      }</li><li><span class=\\"line-num\\" data-line=\\"9\\"></span>      onChange = <span class=\\"hljs-function\\">(<span class=\\"hljs-params\\">event</span>)=&gt;</span>{</li><li><span class=\\"line-num\\" data-line=\\"10\\"></span>        <span class=\\"hljs-comment\\">//提取原有onChange操作</span></li><li><span class=\\"line-num\\" data-line=\\"11\\"></span>          <span class=\\"hljs-keyword\\">const</span> {onChange} = <span class=\\"hljs-built_in\\">this</span>.props</li><li><span class=\\"line-num\\" data-line=\\"12\\"></span>          <span class=\\"hljs-built_in\\">this</span>.setState({</li><li><span class=\\"line-num\\" data-line=\\"13\\"></span>            <span class=\\"hljs-attr\\">value</span>:event.target.value</li><li><span class=\\"line-num\\" data-line=\\"14\\"></span>          },<span class=\\"hljs-function\\">()=&gt;</span>{</li><li><span class=\\"line-num\\" data-line=\\"15\\"></span>            <span class=\\"hljs-comment\\">//状态更新后执行props中原有onChange操作</span></li><li><span class=\\"line-num\\" data-line=\\"16\\"></span>            <span class=\\"hljs-keyword\\">if</span>(<span class=\\"hljs-keyword\\">typeof</span> onChange === <span class=\\"hljs-string\\">&#x27;function&#x27;</span>){</li><li><span class=\\"line-num\\" data-line=\\"17\\"></span>              onChange(event)</li><li><span class=\\"line-num\\" data-line=\\"18\\"></span>            }</li><li><span class=\\"line-num\\" data-line=\\"19\\"></span>          })</li><li><span class=\\"line-num\\" data-line=\\"20\\"></span>      }</li><li><span class=\\"line-num\\" data-line=\\"21\\"></span>      <span class=\\"hljs-function\\"><span class=\\"hljs-title\\">render</span>(<span class=\\"hljs-params\\"></span>)</span>{</li><li><span class=\\"line-num\\" data-line=\\"22\\"></span>        <span class=\\"hljs-keyword\\">const</span> newProps  = {</li><li><span class=\\"line-num\\" data-line=\\"23\\"></span>          <span class=\\"hljs-attr\\">value</span>:<span class=\\"hljs-built_in\\">this</span>.state.value,</li><li><span class=\\"line-num\\" data-line=\\"24\\"></span>          <span class=\\"hljs-attr\\">onChange</span>:<span class=\\"hljs-built_in\\">this</span>.onChange</li><li><span class=\\"line-num\\" data-line=\\"25\\"></span>        }</li><li><span class=\\"line-num\\" data-line=\\"26\\"></span>        <span class=\\"hljs-keyword\\">return</span> (</li><li><span class=\\"line-num\\" data-line=\\"27\\"></span>          <span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"28\\"></span>            <span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">div</span>&gt;</span>{this.state.value}<span class=\\"hljs-tag\\">&lt;/<span class=\\"hljs-name\\">div</span>&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"29\\"></span>            <span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">WrappedComponent</span> {<span class=\\"hljs-attr\\">...this.props</span>} {<span class=\\"hljs-attr\\">...newProps</span>} /&gt;</span></li><li><span class=\\"line-num\\" data-line=\\"30\\"></span>          <span class=\\"hljs-tag\\">&lt;/&gt;</span></span></li><li><span class=\\"line-num\\" data-line=\\"31\\"></span>        );</li><li><span class=\\"line-num\\" data-line=\\"32\\"></span>        </li><li><span class=\\"line-num\\" data-line=\\"33\\"></span>      }</li><li><span class=\\"line-num\\" data-line=\\"34\\"></span>    }</li><li><span class=\\"line-num\\" data-line=\\"35\\"></span>}</li><li><span class=\\"line-num\\" data-line=\\"36\\"></span><span class=\\"hljs-function\\"><span class=\\"hljs-keyword\\">function</span> <span class=\\"hljs-title\\">Hoc</span>(<span class=\\"hljs-params\\">props</span>)</span>{</li><li><span class=\\"line-num\\" data-line=\\"37\\"></span>  <span class=\\"hljs-keyword\\">return</span> <span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">input</span> {<span class=\\"hljs-attr\\">...props</span>}/&gt;</span></span></li><li><span class=\\"line-num\\" data-line=\\"38\\"></span>}</li><li><span class=\\"line-num\\" data-line=\\"39\\"></span><span class=\\"hljs-keyword\\">const</span> ReactInput = proxyHoc(Hoc)</li></ol></code></pre>\\n<h4>深入JSX</h4>\\n<p><code>JSX</code> 仅仅是 <code>React.createElement</code> 的语法糖，当我们写下一段JSX，实际上运行的是什么呢</p>\\n<pre class=\\"hljs\\"><code><span class=\\"name\\"> lang:javascript</span><ol><li><span class=\\"line-num\\" data-line=\\"1\\"></span>&lt;MyButton color=<span class=\\"hljs-string\\">&quot;blue&quot;</span> shadowSize={<span class=\\"hljs-number\\">2</span>}&gt;</li><li><span class=\\"line-num\\" data-line=\\"2\\"></span>  Click Me</li><li><span class=\\"line-num\\" data-line=\\"3\\"></span>&lt;/MyButton&gt;</li></ol></code></pre>\\n<p>会编译为：</p>\\n<pre class=\\"hljs\\"><code><span class=\\"name\\"> lang:javascript</span><ol><li><span class=\\"line-num\\" data-line=\\"1\\"></span>React.createElement(</li><li><span class=\\"line-num\\" data-line=\\"2\\"></span>  MyButton,</li><li><span class=\\"line-num\\" data-line=\\"3\\"></span>  {<span class=\\"hljs-attr\\">color</span>: <span class=\\"hljs-string\\">&#x27;blue&#x27;</span>, <span class=\\"hljs-attr\\">shadowSize</span>: <span class=\\"hljs-number\\">2</span>},</li><li><span class=\\"line-num\\" data-line=\\"4\\"></span>  <span class=\\"hljs-string\\">&#x27;Click Me&#x27;</span></li><li><span class=\\"line-num\\" data-line=\\"5\\"></span>)</li></ol></code></pre>\\n<p>因此， 当我们使用JSX时， React必须在作用域内，否则会出错</p>\\n<h5>在 JSX 类型中使用点语法</h5>\\n<p>在 <code>JSX</code> 中，你也可以使用点语法来引用一个 <code>React</code> 组件。当你在一个模块中导出许多 <code>React</code> 组件时，这会非常方便。例如，如果 <code>MyComponents.DatePicker</code> 是一个组件，你可以在<code> JSX</code> 中直接使用：</p>\\n<p><code>&lt;MyComponents.DatePicker/&gt;</code></p>\\n<h5>用户自定义组件必须大写开头</h5>\\n<p>这是为了不和原生的html 标签冲突</p>\\n<h5>动态组件的写法</h5>\\n<pre class=\\"hljs\\"><code><span class=\\"name\\"> lang:javascript</span><ol><li><span class=\\"line-num\\" data-line=\\"1\\"></span><span class=\\"hljs-keyword\\">import</span> React <span class=\\"hljs-keyword\\">from</span> <span class=\\"hljs-string\\">&#x27;react&#x27;</span>;</li><li><span class=\\"line-num\\" data-line=\\"2\\"></span><span class=\\"hljs-keyword\\">import</span> { PhotoStory, VideoStory } <span class=\\"hljs-keyword\\">from</span> <span class=\\"hljs-string\\">&#x27;./stories&#x27;</span>;</li><li><span class=\\"line-num\\" data-line=\\"3\\"></span></li><li><span class=\\"line-num\\" data-line=\\"4\\"></span><span class=\\"hljs-keyword\\">const</span> components = {</li><li><span class=\\"line-num\\" data-line=\\"5\\"></span>  <span class=\\"hljs-attr\\">photo</span>: PhotoStory,</li><li><span class=\\"line-num\\" data-line=\\"6\\"></span>  <span class=\\"hljs-attr\\">video</span>: VideoStory</li><li><span class=\\"line-num\\" data-line=\\"7\\"></span>};</li><li><span class=\\"line-num\\" data-line=\\"8\\"></span></li><li><span class=\\"line-num\\" data-line=\\"9\\"></span><span class=\\"hljs-function\\"><span class=\\"hljs-keyword\\">function</span> <span class=\\"hljs-title\\">Story</span>(<span class=\\"hljs-params\\">props</span>) </span>{</li><li><span class=\\"line-num\\" data-line=\\"10\\"></span>  <span class=\\"hljs-comment\\">// 正确！JSX 类型可以是大写字母开头的变量。</span></li><li><span class=\\"line-num\\" data-line=\\"11\\"></span>  <span class=\\"hljs-keyword\\">const</span> SpecificStory = components[props.storyType];</li><li><span class=\\"line-num\\" data-line=\\"12\\"></span>  <span class=\\"hljs-keyword\\">return</span> <span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">SpecificStory</span> <span class=\\"hljs-attr\\">story</span>=<span class=\\"hljs-string\\">{props.story}</span> /&gt;</span></span>;</li><li><span class=\\"line-num\\" data-line=\\"13\\"></span>}</li></ol></code></pre>\\n<h5>props 默认值为 “True”</h5>\\n<pre class=\\"hljs\\"><code><span class=\\"name\\"> lang:javascript</span><ol><li><span class=\\"line-num\\" data-line=\\"1\\"></span>&lt;MyTextBox autocomplete /&gt;</li><li><span class=\\"line-num\\" data-line=\\"2\\"></span></li><li><span class=\\"line-num\\" data-line=\\"3\\"></span><span class=\\"xml\\"><span class=\\"hljs-tag\\">&lt;<span class=\\"hljs-name\\">MyTextBox</span> <span class=\\"hljs-attr\\">autocomplete</span>=<span class=\\"hljs-string\\">{true}</span> /&gt;</span></span></li><li><span class=\\"line-num\\" data-line=\\"4\\"></span><span class=\\"hljs-comment\\">//这两个是等价的</span></li><li><span class=\\"line-num\\" data-line=\\"5\\"></span></li></ol></code></pre>\\n","author":"timebean"},{"title":"测试","date":"2021/5/29","content":"<h2 style=\'text-align:center\'>测试</h2>\\n<span style=\'text-align:center;color:grey;\'>日期：</span><span style=\'text-align:center;color:grey;\'>2021/5/29</span>\\t\\n<span style=\'text-align:center;color:grey;\'>作者：</span><span style=\'text-align:center;color:grey;\'>timebean</span>\\n","author":"timebean"}]')},cd49:function(s,a,n){"use strict";n.r(a);n("e260"),n("e6cf"),n("cca6"),n("a79d");var l=n("7a23"),e=Object(l["I"])("data-v-171ac179"),t=e((function(s,a,n,e,t,p){var i=Object(l["z"])("loading"),c=Object(l["z"])("router-view");return Object(l["r"])(),Object(l["d"])(l["a"],null,[s.loaded&&s.entered?Object(l["e"])("",!0):(Object(l["r"])(),Object(l["d"])(i,{key:0,loaded:s.loaded,onEnter:s.enter},null,8,["loaded","onEnter"])),s.loaded&&s.entered?(Object(l["r"])(),Object(l["d"])(c,{key:1})):Object(l["e"])("",!0)],64)}));function p(){var s=Object(l["w"])(0),a=Object(l["w"])(!1),n=Object(l["w"])(!1),e=setInterval((function(){s.value=page_progress}),0),t=function(){a.value=!0};return Object(l["F"])(s,(function(s){1!=s||n.value||(clearInterval(e),setTimeout((function(){n.value=!0}),100))})),{progress:s,loaded:n,enter:t,entered:a}}var i=p,c=Object(l["I"])("data-v-cdba2fc8");Object(l["u"])("data-v-cdba2fc8");var o={class:"container"},r=Object(l["g"])("div",{class:"loading"},[Object(l["g"])("img",{src:"/vue3-blog/NERV_Logo.png"}),Object(l["g"])("img",{src:"/vue3-blog/NERV_Logo.png",class:"clip",id:"loading"}),Object(l["g"])("img",{src:"/vue3-blog/NERV_Logo.png",class:"shark shark-animation"})],-1),u={key:0,class:"button"},d=Object(l["g"])("div",{class:"decrator"},null,-1),h=Object(l["g"])("div",{class:"decrator"},null,-1);Object(l["s"])();var m=c((function(s,a,n,e,t,p){return Object(l["r"])(),Object(l["d"])("div",o,[r,s.isLoaded?(Object(l["r"])(),Object(l["d"])("div",u,[d,Object(l["g"])("div",{class:"text",onClick:a[1]||(a[1]=function(){return s.enter&&s.enter.apply(s,arguments)})}," 出擊 "),h])):Object(l["e"])("",!0)])})),j=Object(l["h"])({props:{loaded:Boolean},setup:function(s,a){var n=Object(l["w"])(0),e=Object(l["b"])((function(){return s.loaded&&100==n.value}));Object(l["p"])((function(){var a=function(s){return"inset(0% 0% 0% ".concat(s,"%)")},l=document.querySelector("#loading"),e=function e(){(n.value<70&&!s.loaded||s.loaded&&n.value<100)&&n.value++,l&&(l.style.clipPath=a(n.value)),n.value<100&&requestAnimationFrame(e)};requestAnimationFrame(e)}));var t=function(){a.emit("enter")};return{isLoaded:e,enter:t}}});n("721c");j.render=m,j.__scopeId="data-v-cdba2fc8";var g=j,A=Object(l["h"])({components:{loading:g},setup:function(){return i()}});n("f3e1"),n("d5c2");A.render=t,A.__scopeId="data-v-171ac179";var b=A,f=(n("d3b7"),n("6c02")),v=Object(l["I"])("data-v-370f3b48");Object(l["u"])("data-v-370f3b48");var O={class:"home",id:"desktop"};Object(l["s"])();var y=v((function(s,a,n,e,t,p){var i=Object(l["z"])("IconList"),c=Object(l["z"])("TaskList"),o=Object(l["z"])("DialogList");return Object(l["r"])(),Object(l["d"])("div",O,[Object(l["g"])(i),Object(l["g"])(c),Object(l["g"])(o)])})),k=Object(l["I"])("data-v-fecbf704");Object(l["u"])("data-v-fecbf704");var w={class:"icon_list"};Object(l["s"])();var C=k((function(s,a,n,e,t,p){return Object(l["r"])(),Object(l["d"])("div",w,[(Object(l["r"])(!0),Object(l["d"])(l["a"],null,Object(l["x"])(s.iconList,(function(a,n){return Object(l["r"])(),Object(l["d"])("div",{class:"_icon",key:n,onDblclick:function(n){return s.addDialog(a)}},[Object(l["g"])("img",{src:a.img},null,8,["src"]),Object(l["g"])("div",null,Object(l["C"])(a.title),1)],40,["onDblclick"])})),128))])})),x=(n("4160"),n("a434"),n("159b"),n("d4ec")),S=[];function T(s){return{createTask:M(s),removeTask:E(s),updateTask:D(s),selectTask:R(s),hiddenTask:B(s)}}function M(s){var a=s.tasks;return function(s){var n=!0;if(a.forEach((function(a,l){a===s&&(n=!1,I.actions.selectTask(l))})),n){s.zIndex=I.state.maxIndex;var l=document.querySelector("#desktop");s.defaultStyle={width:l.clientWidth/2,height:l.clientHeight/2,left:l.clientWidth/4+10*a.length,top:l.clientHeight/4+10*a.length};var e=a.push(s);I.actions.selectTask(e-1)}}}function E(s){var a=s.tasks;return function(s){a.splice(s,1)}}function D(s){var a=s.tasks;return function(s,n){a[s]=n}}function B(s){var a=s.tasks;return function(s){a[s].isShow=!1,a[s].isActive=!1}}function R(s){return function(a){var n=99,l=s.tasks[a];s.tasks.forEach((function(s){s.isActive&&(s.isActive=!1),s.zIndex&&(n=s.zIndex>n?s.zIndex:n)})),l.isShow=!0,l.isActive=!0,l.zIndex=n+1,s.maxIndex=n+1,s.activeIndex=a}}var I=function s(){Object(x["a"])(this,s)};I.state=Object(l["v"])({tasks:S,activeIndex:0,maxIndex:99}),I.actions=T(I.state);var L=I,P=[{title:"相册",isActive:!1,isShow:!1,img:n("5e4f"),type:"pic-list"},{title:"博客",isActive:!1,isShow:!1,type:"blog-list",img:n("29ed")},{title:"音乐",isActive:!1,isShow:!1,img:n("dc44"),type:"music-list"}];function _(){var s=Object(l["v"])(P),a=L.actions.createTask,n=function(s){a(s)};return{iconList:s,addDialog:n}}var z=Object(l["h"])({setup:function(){var s=_(),a=s.iconList,n=s.addDialog;return{iconList:a,addDialog:n}}});n("b946");z.render=C,z.__scopeId="data-v-fecbf704";var N=z,H=Object(l["I"])("data-v-495632b8");Object(l["u"])("data-v-495632b8");var F={class:"list-bar"},Z={class:"button-classic start"},U=Object(l["g"])("a",{href:"https://github.com/s33you",target:"blank"},"github",-1),V={class:"task-area"},W={class:"time button-inner"};Object(l["s"])();var q=H((function(s,a,n,e,t,p){var i=Object(l["z"])("w-icon");return Object(l["r"])(),Object(l["d"])("div",F,[Object(l["g"])("button",Z,[Object(l["g"])(i,{icon:"github",size:"20"}),U]),Object(l["g"])("div",V,[(Object(l["r"])(!0),Object(l["d"])(l["a"],null,Object(l["x"])(s.taskList,(function(a,n){return Object(l["r"])(),Object(l["d"])("div",{class:["bar-window",a.isActive?"button-inner":"button-classic"],key:n,onClick:function(l){return s.clickTask(n,a)}},[a.img?(Object(l["r"])(),Object(l["d"])("img",{key:0,src:a.img},null,8,["src"])):Object(l["e"])("",!0),Object(l["f"])(" "+Object(l["C"])(a.title),1)],10,["onClick"])})),128))]),Object(l["g"])("span",W,Object(l["C"])(s.time),1)])})),Q=n("d1ae"),J=n("44a6");function Y(){var s=Object(l["w"])(Object(J["b"])("hh:mm:ss",new Date)),a=L.state.tasks,n=L.state.maxIndex,e=L.actions,t=e.createTask,p=e.selectTask,i=e.removeTask,c=e.hiddenTask;return Object(l["p"])((function(){setInterval((function(){s.value=Object(J["b"])("hh:mm:ss",new Date)}),1e3)})),{time:s,taskList:a,createTask:t,selectTask:p,maxIndex:n,removeTask:i,hiddenTask:c}}var G=Y,X=Object(l["h"])({name:"w-task-list",components:{wIcon:Q["default"]},setup:function(){var s=G(),a=s.createTask,n=s.time,l=s.taskList,e=s.selectTask,t=s.hiddenTask,p=function(s,a){a.isActive?t(s):e(s)};return{createTask:a,time:n,taskList:l,clickTask:p}}});n("bf18");X.render=q,X.__scopeId="data-v-495632b8";var K=X,$=n("d56e"),ss=(n("d81d"),n("4ec9"),n("3ca3"),n("ddb0"),n("ce6e")),as=n.n(ss),ns=Object(l["I"])("data-v-8a317e18");Object(l["u"])("data-v-8a317e18");var ls={class:"markdown-list"},es=Object(l["g"])("img",{src:as.a},null,-1),ts={class:"title"};Object(l["s"])();var ps=ns((function(s,a,n,e,t,p){return Object(l["r"])(),Object(l["d"])("div",ls,[(Object(l["r"])(!0),Object(l["d"])(l["a"],null,Object(l["x"])(s.blogs,(function(a,n){return Object(l["r"])(),Object(l["d"])("div",{key:n,class:"mark_down",onDblclick:Object(l["H"])((function(n){return s.openBlog(a)}),["stop"])},[es,Object(l["g"])("div",ts,Object(l["C"])(a.title),1)],40,["onDblclick"])})),128))])})),is=n("cb86"),cs=is,os=Object(l["h"])({setup:function(){var s=L.actions.createTask,a=function(a){var l={title:a.title,props:{blog:a.content},img:n("ce6e"),isActive:!1,isShow:!1,type:"blog"};s(l)};return{blogs:cs,openBlog:a}}});n("9d2d");os.render=ps,os.__scopeId="data-v-8a317e18";var rs=os,us=n("6b8e"),ds=new Map;ds.set("blog-list",(function(s){return Object(l["g"])(rs,null,null)})),ds.set("blog",(function(s){return Object(l["g"])(us["default"],{blog:s.props.blog},null)}));var hs=G(),ms=hs.taskList,js=hs.removeTask,gs=hs.selectTask,As=hs.hiddenTask,bs=function(){return ms.map((function(s,a){return Object(l["g"])(Object(l["z"])("w-dialog"),{defaultStyle:s.defaultStyle,title:s.title,isShow:s.isShow,icon:s.img,style:"zIndex:".concat(s.zIndex),onSelect:function(){gs(a)},isActive:s.isActive,onHidden:function(){As(a)},onClose:function(){js(a)}},{default:function(){return[ds.get(s.type)?ds.get(s.type)(s):""]}})}))},fs=bs,vs=Object(l["h"])({components:{WDialog:$["default"]},setup:function(){return fs}}),Os=vs,ys=Object(l["h"])({components:{IconList:N,TaskList:K,DialogList:Os},name:"Home",setup:function(){var s=Object(l["A"])({width:0,height:0});return Object(l["p"])((function(){var a=document.querySelector("#desktop");s.width=a.clientWidth,s.height=a.clientHeight,window.onresize=Object(J["a"])((function(){s.width=a.clientWidth,s.height=a.clientHeight,console.log("resize")}),60)})),Object(l["t"])("container",s),s}});n("e44e");ys.render=y,ys.__scopeId="data-v-370f3b48";var ks=ys,ws=[{path:"/",name:"Home",component:ks},{path:"/doc",name:"Doc",component:function(){return n.e("chunk-3c1a516c").then(n.bind(null,"b05d"))}}],Cs=Object(f["a"])({history:Object(f["b"])(),routes:ws}),xs=Cs;Object(l["c"])(b).use(xs).mount("#app")},ce6e:function(s,a){s.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAGFBMVEUAAAAAAACAgID////AwMAAAL8AAP///wCsLlssAAAAAXRSTlMAQObYZgAAAAFiS0dEAxEMTPIAAAAHdElNRQfiBhoAOCQMIApYAAAAvUlEQVQoz22Ryw7CIBREqYl7xlb3Pj7APpQ1iaZbXcjaxBTXhCi/bx+2XBomd8PJDDcMjCUc43DWab8rpunIIi/TcbYyCkovKdltBpbPGVAtuHjJqz6GDvUOI1d9DiPqpcMt6tsEkXyjwy04NWEkhWooEMD6wUnEGuBOHidEBXACrKsNuuf/A7Wr3AekD2trB1JQe4MzUvqIK4BMeofIV0OFIzBpOYG+qmxoLNJ6DNCSow528I6s//4EXu3xB1FNX4O6vHKSAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE4LTA2LTI2VDAwOjU2OjM2LTA0OjAwEWYRaQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOC0wNi0yNlQwMDo1NjozNi0wNDowMGA7qdUAAAAASUVORK5CYII="},d183:function(s,a,n){},d1ae:function(s,a,n){"use strict";n.r(a);var l=n("7a23"),e=Object(l["I"])("data-v-fd845b36");Object(l["u"])("data-v-fd845b36");var t={class:"w-icon"};Object(l["s"])();var p=e((function(s,a,n,e,p,i){return Object(l["r"])(),Object(l["d"])("span",t,[Object(l["g"])("i",{class:[s.icon,"iconfont"],style:s.size},null,6)])})),i=Object(l["h"])({setup:function(s,a){var n=a.attrs,e=n.icon,t=n.size;return e=Object(l["w"])("icon-"+e),t=Object(l["w"])("font-size:".concat(t,"px")),{icon:e,size:t}},inheritAttrs:!1});n("7611");i.render=p,i.__scopeId="data-v-fd845b36";a["default"]=i},d56e:function(s,a,n){"use strict";n.r(a);var l=n("7a23"),e=Object(l["I"])("data-v-9ed0ec46");Object(l["u"])("data-v-9ed0ec46");var t={id:"title"},p={class:"content-block"},i=Object(l["f"])(" 对话框默认内容 ");Object(l["s"])();var c=e((function(s,a,n,c,o,r){var u=Object(l["z"])("w-drag");return Object(l["G"])((Object(l["r"])(),Object(l["d"])(u,{defaultStyle:s.defaultStyle,style:s.getStyle(s.defaultStyle),minBox:s.minBox,class:["w-dialog",s.isActive?"card-secondary":""],onClick:Object(l["H"])(s.selectDialog,["stop"])},{default:e((function(){return[Object(l["g"])("div",{class:"card-header dialog-header",onMousedown:a[4]||(a[4]=Object(l["H"])((function(){return s.handleMoveDialog&&s.handleMoveDialog.apply(s,arguments)}),["stop"]))},[s.icon?(Object(l["r"])(),Object(l["d"])("img",{key:0,id:"icon",src:s.icon},null,8,["src"])):Object(l["e"])("",!0),Object(l["g"])("span",t,Object(l["C"])(s.title),1),Object(l["g"])("button",{class:"button-classic icon-button",onClick:a[1]||(a[1]=Object(l["H"])((function(){return s.handleClose&&s.handleClose.apply(s,arguments)}),["stop"]))}," x "),Object(l["g"])("button",{class:"button-classic icon-button",onClick:a[2]||(a[2]=Object(l["H"])((function(){return s.handleZoom&&s.handleZoom.apply(s,arguments)}),["stop"]))}," ◻ "),Object(l["g"])("button",{class:"button-classic icon-button",onClick:a[3]||(a[3]=Object(l["H"])((function(){return s.handleHidden&&s.handleHidden.apply(s,arguments)}),["stop"]))}," - ")],32),Object(l["g"])("div",p,[Object(l["y"])(s.$slots,"default",{},(function(){return[i]}))])]})),_:3},8,["defaultStyle","style","minBox","class","onClick"])),[[l["E"],s.isShow]])})),o=n("5530"),r=n("44a6"),u=n("e31b");function d(s,a){var n=s.defaultStyle,e=a.emit,t=Object(l["A"])({width:200,height:100}),p=Object(l["k"])("container"),i=function(s){s.stopPropagation(),s.preventDefault();var a=n,l=s.pageY,e=s.pageX,t=a["top"],i=a["left"],c=Object(r["a"])((function(s){s.stopPropagation();var c=s.pageX,o=s.pageY,r=o-l+t,u=c-e+i;p&&((r<0||r+a.height>p.height-10)&&(r=r<0?0:p.height-a.height),(u<0||u+a.width>p.width-10)&&(u=u<0?0:p.width-a.width-4)),n.top=r,n.left=u}),10),o=function s(){document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",s)};document.addEventListener("mousemove",c),document.addEventListener("mouseup",o)},c=function(){e("hidden")},o=function(){e("close")},d=function(){e("select")},h=function(){n.width=p.width-4,n.height=p.height-4,n.top=0,n.left=0,e("zoom")};return{selectDialog:d,getStyle:u["a"],handleMoveDialog:i,minBox:t,handleHidden:c,handleClose:o,handleZoom:h}}var h=n("aade"),m=Object(l["h"])({components:{wDrag:h["default"]},props:{title:{default:"对话框"},defaultStyle:{type:Object,default:{width:200,top:10,left:10,height:100}},isShow:{type:Boolean,default:!1},icon:{type:String,default:""},isActive:{type:Boolean,default:!1}},emits:["select","hidden","zoom","close"],inject:["container"],setup:function(s,a){return Object(o["a"])({},d(s,a))}});n("f506"),n("1e11");m.render=c,m.__scopeId="data-v-9ed0ec46";a["default"]=m},d5c2:function(s,a,n){"use strict";n("eca5")},db80:function(s,a,n){"use strict";n("3682")},dc44:function(s,a){s.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwBAMAAAClLOS0AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAGFBMVEUAAAAAAACAgID//wDAwMAA//////8A/wBjuPy4AAAAAXRSTlMAQObYZgAAAAFiS0dEBmFmuH0AAAAHdElNRQfiBBMBIhiVaPrZAAABWUlEQVQ4y63US27DIBAGYMwJjGWp23pEmgN4kbURIevI5gCtuECkVL5+Z4ZgoLI3VVlYFp9+HgO2ENiaVuy3RrVHcCAI+0KwK01LsgviEMQhiL8AYNvZnoJxtBbeM/QMUs0E1mzSOAJ5Up4hSwMEZ5/ATmWh5JrBthnEGR8JXIpQ4DEhzBFCyPU8958bOLdFhNDdsEEIYUj90lLZI2DAmDSW9Nj/9s2AAa0TaHtX6rbOADFgpg2st/aGOwUO6CEDilEA6oMCKSF5+X7AmkNHgTRJBDtg9WRnuJVgOnofdFGu/wReiI6Tl0cieSEuLrc6Kw6EL9qgrk4XKOAcluS0VMCBECzA01cgOYAd4+W6FFPQsijA4EsQEAMIT7/kkXCSGCCgSAYZAwjrFSP5+mAkwrha73NgOxIEHKsIxNN9wb36qKR+wTpVAbzbPcPl8aufbj3B7g+i+j38ACyOgB2/RKMsAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE4LTA0LTE5VDAxOjM0OjI0LTA0OjAw0kH5agAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOC0wNC0xOVQwMTozNDoyNC0wNDowMKMcQdYAAAAASUVORK5CYII="},e1c2:function(s,a,n){"use strict";n("160f")},e31b:function(s,a,n){"use strict";n.d(a,"a",(function(){return l}));n("4160"),n("caad"),n("b64b"),n("2532"),n("159b");function l(s,a){var n=["fontSize","width","height","top","left","borderWidth","letterSpacing","borderRadius"],l={};return Object.keys(s).forEach((function(e){a&&a.includes(e)||("rotate"!=e?(l[e]=s[e],n.includes(e)&&(l[e]+="px")):l.transform=e+"("+s[e]+"deg)")})),l}},e44e:function(s,a,n){"use strict";n("85eb")},e8a9:function(s,a,n){},eca5:function(s,a,n){},f289:function(s,a,n){},f3e1:function(s,a,n){"use strict";n("5e35")},f40f:function(s,a,n){"use strict";n("8488")},f506:function(s,a,n){"use strict";n("8762")}});
//# sourceMappingURL=app.0ae69be4.js.map